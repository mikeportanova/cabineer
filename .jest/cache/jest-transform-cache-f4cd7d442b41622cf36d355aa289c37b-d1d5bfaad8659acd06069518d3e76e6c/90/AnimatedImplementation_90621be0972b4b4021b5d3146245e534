390bcf6595a062017327a66860df0068
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _AnimatedColor = _interopRequireDefault(require("./nodes/AnimatedColor"));

var _require = require("./AnimatedEvent"),
    AnimatedEvent = _require.AnimatedEvent,
    attachNativeEvent = _require.attachNativeEvent;

var AnimatedAddition = require("./nodes/AnimatedAddition");

var AnimatedDiffClamp = require("./nodes/AnimatedDiffClamp");

var AnimatedDivision = require("./nodes/AnimatedDivision");

var AnimatedInterpolation = require("./nodes/AnimatedInterpolation");

var AnimatedModulo = require("./nodes/AnimatedModulo");

var AnimatedMultiplication = require("./nodes/AnimatedMultiplication");

var AnimatedNode = require("./nodes/AnimatedNode");

var AnimatedSubtraction = require("./nodes/AnimatedSubtraction");

var AnimatedTracking = require("./nodes/AnimatedTracking");

var AnimatedValue = require("./nodes/AnimatedValue");

var AnimatedValueXY = require("./nodes/AnimatedValueXY");

var DecayAnimation = require("./animations/DecayAnimation");

var SpringAnimation = require("./animations/SpringAnimation");

var TimingAnimation = require("./animations/TimingAnimation");

var createAnimatedComponent = require("./createAnimatedComponent");

var add = function add(a, b) {
  return new AnimatedAddition(a, b);
};

var subtract = function subtract(a, b) {
  return new AnimatedSubtraction(a, b);
};

var divide = function divide(a, b) {
  return new AnimatedDivision(a, b);
};

var multiply = function multiply(a, b) {
  return new AnimatedMultiplication(a, b);
};

var modulo = function modulo(a, modulus) {
  return new AnimatedModulo(a, modulus);
};

var diffClamp = function diffClamp(a, min, max) {
  return new AnimatedDiffClamp(a, min, max);
};

var _combineCallbacks = function _combineCallbacks(callback, config) {
  if (callback && config.onComplete) {
    return function () {
      config.onComplete && config.onComplete.apply(config, arguments);
      callback && callback.apply(void 0, arguments);
    };
  } else {
    return callback || config.onComplete;
  }
};

var maybeVectorAnim = function maybeVectorAnim(value, config, anim) {
  if (value instanceof AnimatedValueXY) {
    var configX = Object.assign({}, config);
    var configY = Object.assign({}, config);

    for (var key in config) {
      var _config$key = config[key],
          x = _config$key.x,
          y = _config$key.y;

      if (x !== undefined && y !== undefined) {
        configX[key] = x;
        configY[key] = y;
      }
    }

    var aX = anim(value.x, configX);
    var aY = anim(value.y, configY);
    return parallel([aX, aY], {
      stopTogether: false
    });
  } else if (value instanceof _AnimatedColor.default) {
    var configR = Object.assign({}, config);
    var configG = Object.assign({}, config);
    var configB = Object.assign({}, config);
    var configA = Object.assign({}, config);

    for (var _key in config) {
      var _config$_key = config[_key],
          r = _config$_key.r,
          g = _config$_key.g,
          b = _config$_key.b,
          a = _config$_key.a;

      if (r !== undefined && g !== undefined && b !== undefined && a !== undefined) {
        configR[_key] = r;
        configG[_key] = g;
        configB[_key] = b;
        configA[_key] = a;
      }
    }

    var aR = anim(value.r, configR);
    var aG = anim(value.g, configG);
    var aB = anim(value.b, configB);
    var aA = anim(value.a, configA);
    return parallel([aR, aG, aB, aA], {
      stopTogether: false
    });
  }

  return null;
};

var spring = function spring(value, config) {
  var _start = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();

    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, SpringAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new SpringAnimation(singleConfig), callback);
    }
  };

  return maybeVectorAnim(value, config, spring) || {
    start: function start(callback) {
      _start(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = Object.assign({}, config, {
        iterations: iterations
      });

      _start(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};

var timing = function timing(value, config) {
  var _start2 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();

    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, TimingAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new TimingAnimation(singleConfig), callback);
    }
  };

  return maybeVectorAnim(value, config, timing) || {
    start: function start(callback) {
      _start2(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = Object.assign({}, config, {
        iterations: iterations
      });

      _start2(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};

var decay = function decay(value, config) {
  var _start3 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    singleValue.animate(new DecayAnimation(singleConfig), callback);
  };

  return maybeVectorAnim(value, config, decay) || {
    start: function start(callback) {
      _start3(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = Object.assign({}, config, {
        iterations: iterations
      });

      _start3(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};

var sequence = function sequence(animations) {
  var current = 0;
  return {
    start: function start(callback) {
      var onComplete = function onComplete(result) {
        if (!result.finished) {
          callback && callback(result);
          return;
        }

        current++;

        if (current === animations.length) {
          callback && callback(result);
          return;
        }

        animations[current].start(onComplete);
      };

      if (animations.length === 0) {
        callback && callback({
          finished: true
        });
      } else {
        animations[current].start(onComplete);
      }
    },
    stop: function stop() {
      if (current < animations.length) {
        animations[current].stop();
      }
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        if (idx <= current) {
          animation.reset();
        }
      });
      current = 0;
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.sequence animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
};

var parallel = function parallel(animations, config) {
  var doneCount = 0;
  var hasEnded = {};
  var stopTogether = !(config && config.stopTogether === false);
  var result = {
    start: function start(callback) {
      if (doneCount === animations.length) {
        callback && callback({
          finished: true
        });
        return;
      }

      animations.forEach(function (animation, idx) {
        var cb = function cb(endResult) {
          hasEnded[idx] = true;
          doneCount++;

          if (doneCount === animations.length) {
            doneCount = 0;
            callback && callback(endResult);
            return;
          }

          if (!endResult.finished && stopTogether) {
            result.stop();
          }
        };

        if (!animation) {
          cb({
            finished: true
          });
        } else {
          animation.start(cb);
        }
      });
    },
    stop: function stop() {
      animations.forEach(function (animation, idx) {
        !hasEnded[idx] && animation.stop();
        hasEnded[idx] = true;
      });
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        animation.reset();
        hasEnded[idx] = false;
        doneCount = 0;
      });
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.parallel animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
  return result;
};

var delay = function delay(time) {
  return timing(new AnimatedValue(0), {
    toValue: 0,
    delay: time,
    duration: 0,
    useNativeDriver: false
  });
};

var stagger = function stagger(time, animations) {
  return parallel(animations.map(function (animation, i) {
    return sequence([delay(time * i), animation]);
  }));
};

var loop = function loop(animation) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      _ref$iterations = _ref.iterations,
      iterations = _ref$iterations === void 0 ? -1 : _ref$iterations,
      _ref$resetBeforeItera = _ref.resetBeforeIteration,
      resetBeforeIteration = _ref$resetBeforeItera === void 0 ? true : _ref$resetBeforeItera;

  var isFinished = false;
  var iterationsSoFar = 0;
  return {
    start: function start(callback) {
      var restart = function restart() {
        var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          finished: true
        };

        if (isFinished || iterationsSoFar === iterations || result.finished === false) {
          callback && callback(result);
        } else {
          iterationsSoFar++;
          resetBeforeIteration && animation.reset();
          animation.start(restart);
        }
      };

      if (!animation || iterations === 0) {
        callback && callback({
          finished: true
        });
      } else {
        if (animation._isUsingNativeDriver()) {
          animation._startNativeLoop(iterations);
        } else {
          restart();
        }
      }
    },
    stop: function stop() {
      isFinished = true;
      animation.stop();
    },
    reset: function reset() {
      iterationsSoFar = 0;
      isFinished = false;
      animation.reset();
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.loop animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return animation._isUsingNativeDriver();
    }
  };
};

function forkEvent(event, listener) {
  if (!event) {
    return listener;
  } else if (event instanceof AnimatedEvent) {
    event.__addListener(listener);

    return event;
  } else {
    return function () {
      typeof event === 'function' && event.apply(void 0, arguments);
      listener.apply(void 0, arguments);
    };
  }
}

function unforkEvent(event, listener) {
  if (event && event instanceof AnimatedEvent) {
    event.__removeListener(listener);
  }
}

var event = function event(argMapping, config) {
  var animatedEvent = new AnimatedEvent(argMapping, config);

  if (animatedEvent.__isNative) {
    return animatedEvent;
  } else {
    return animatedEvent.__getHandler();
  }
};

module.exports = {
  Value: AnimatedValue,
  ValueXY: AnimatedValueXY,
  Color: _AnimatedColor.default,
  Interpolation: AnimatedInterpolation,
  Node: AnimatedNode,
  decay: decay,
  timing: timing,
  spring: spring,
  add: add,
  subtract: subtract,
  divide: divide,
  multiply: multiply,
  modulo: modulo,
  diffClamp: diffClamp,
  delay: delay,
  sequence: sequence,
  parallel: parallel,
  stagger: stagger,
  loop: loop,
  event: event,
  createAnimatedComponent: createAnimatedComponent,
  attachNativeEvent: attachNativeEvent,
  forkEvent: forkEvent,
  unforkEvent: unforkEvent,
  Event: AnimatedEvent
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwiQW5pbWF0ZWRFdmVudCIsImF0dGFjaE5hdGl2ZUV2ZW50IiwiQW5pbWF0ZWRBZGRpdGlvbiIsIkFuaW1hdGVkRGlmZkNsYW1wIiwiQW5pbWF0ZWREaXZpc2lvbiIsIkFuaW1hdGVkSW50ZXJwb2xhdGlvbiIsIkFuaW1hdGVkTW9kdWxvIiwiQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbiIsIkFuaW1hdGVkTm9kZSIsIkFuaW1hdGVkU3VidHJhY3Rpb24iLCJBbmltYXRlZFRyYWNraW5nIiwiQW5pbWF0ZWRWYWx1ZSIsIkFuaW1hdGVkVmFsdWVYWSIsIkRlY2F5QW5pbWF0aW9uIiwiU3ByaW5nQW5pbWF0aW9uIiwiVGltaW5nQW5pbWF0aW9uIiwiY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQiLCJhZGQiLCJhIiwiYiIsInN1YnRyYWN0IiwiZGl2aWRlIiwibXVsdGlwbHkiLCJtb2R1bG8iLCJtb2R1bHVzIiwiZGlmZkNsYW1wIiwibWluIiwibWF4IiwiX2NvbWJpbmVDYWxsYmFja3MiLCJjYWxsYmFjayIsImNvbmZpZyIsIm9uQ29tcGxldGUiLCJtYXliZVZlY3RvckFuaW0iLCJ2YWx1ZSIsImFuaW0iLCJjb25maWdYIiwiY29uZmlnWSIsImtleSIsIngiLCJ5IiwidW5kZWZpbmVkIiwiYVgiLCJhWSIsInBhcmFsbGVsIiwic3RvcFRvZ2V0aGVyIiwiQW5pbWF0ZWRDb2xvciIsImNvbmZpZ1IiLCJjb25maWdHIiwiY29uZmlnQiIsImNvbmZpZ0EiLCJyIiwiZyIsImFSIiwiYUciLCJhQiIsImFBIiwic3ByaW5nIiwic3RhcnQiLCJhbmltYXRlZFZhbHVlIiwiY29uZmlndXJhdGlvbiIsInNpbmdsZVZhbHVlIiwic2luZ2xlQ29uZmlnIiwic3RvcFRyYWNraW5nIiwidG9WYWx1ZSIsInRyYWNrIiwiYW5pbWF0ZSIsInN0b3AiLCJzdG9wQW5pbWF0aW9uIiwicmVzZXQiLCJyZXNldEFuaW1hdGlvbiIsIl9zdGFydE5hdGl2ZUxvb3AiLCJpdGVyYXRpb25zIiwiX2lzVXNpbmdOYXRpdmVEcml2ZXIiLCJ1c2VOYXRpdmVEcml2ZXIiLCJ0aW1pbmciLCJkZWNheSIsInNlcXVlbmNlIiwiYW5pbWF0aW9ucyIsImN1cnJlbnQiLCJyZXN1bHQiLCJmaW5pc2hlZCIsImxlbmd0aCIsImZvckVhY2giLCJhbmltYXRpb24iLCJpZHgiLCJFcnJvciIsImRvbmVDb3VudCIsImhhc0VuZGVkIiwiY2IiLCJlbmRSZXN1bHQiLCJkZWxheSIsInRpbWUiLCJkdXJhdGlvbiIsInN0YWdnZXIiLCJtYXAiLCJpIiwibG9vcCIsInJlc2V0QmVmb3JlSXRlcmF0aW9uIiwiaXNGaW5pc2hlZCIsIml0ZXJhdGlvbnNTb0ZhciIsInJlc3RhcnQiLCJmb3JrRXZlbnQiLCJldmVudCIsImxpc3RlbmVyIiwiX19hZGRMaXN0ZW5lciIsInVuZm9ya0V2ZW50IiwiX19yZW1vdmVMaXN0ZW5lciIsImFyZ01hcHBpbmciLCJhbmltYXRlZEV2ZW50IiwiX19pc05hdGl2ZSIsIl9fZ2V0SGFuZGxlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJWYWx1ZSIsIlZhbHVlWFkiLCJDb2xvciIsIkludGVycG9sYXRpb24iLCJOb2RlIiwiRXZlbnQiXSwic291cmNlcyI6WyJBbmltYXRlZEltcGxlbWVudGF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3Qge0FuaW1hdGVkRXZlbnQsIGF0dGFjaE5hdGl2ZUV2ZW50fSA9IHJlcXVpcmUoJy4vQW5pbWF0ZWRFdmVudCcpO1xuY29uc3QgQW5pbWF0ZWRBZGRpdGlvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRBZGRpdGlvbicpO1xuY29uc3QgQW5pbWF0ZWREaWZmQ2xhbXAgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkRGlmZkNsYW1wJyk7XG5jb25zdCBBbmltYXRlZERpdmlzaW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZERpdmlzaW9uJyk7XG5jb25zdCBBbmltYXRlZEludGVycG9sYXRpb24gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkSW50ZXJwb2xhdGlvbicpO1xuY29uc3QgQW5pbWF0ZWRNb2R1bG8gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkTW9kdWxvJyk7XG5jb25zdCBBbmltYXRlZE11bHRpcGxpY2F0aW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZE11bHRpcGxpY2F0aW9uJyk7XG5jb25zdCBBbmltYXRlZE5vZGUgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkTm9kZScpO1xuY29uc3QgQW5pbWF0ZWRTdWJ0cmFjdGlvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRTdWJ0cmFjdGlvbicpO1xuY29uc3QgQW5pbWF0ZWRUcmFja2luZyA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRUcmFja2luZycpO1xuY29uc3QgQW5pbWF0ZWRWYWx1ZSA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRWYWx1ZScpO1xuY29uc3QgQW5pbWF0ZWRWYWx1ZVhZID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFZhbHVlWFknKTtcbmNvbnN0IERlY2F5QW5pbWF0aW9uID0gcmVxdWlyZSgnLi9hbmltYXRpb25zL0RlY2F5QW5pbWF0aW9uJyk7XG5jb25zdCBTcHJpbmdBbmltYXRpb24gPSByZXF1aXJlKCcuL2FuaW1hdGlvbnMvU3ByaW5nQW5pbWF0aW9uJyk7XG5jb25zdCBUaW1pbmdBbmltYXRpb24gPSByZXF1aXJlKCcuL2FuaW1hdGlvbnMvVGltaW5nQW5pbWF0aW9uJyk7XG5cbmNvbnN0IGNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9jcmVhdGVBbmltYXRlZENvbXBvbmVudCcpO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFuaW1hdGlvbkNvbmZpZyxcbiAgRW5kQ2FsbGJhY2ssXG4gIEVuZFJlc3VsdCxcbn0gZnJvbSAnLi9hbmltYXRpb25zL0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7VGltaW5nQW5pbWF0aW9uQ29uZmlnfSBmcm9tICcuL2FuaW1hdGlvbnMvVGltaW5nQW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtEZWNheUFuaW1hdGlvbkNvbmZpZ30gZnJvbSAnLi9hbmltYXRpb25zL0RlY2F5QW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtTcHJpbmdBbmltYXRpb25Db25maWd9IGZyb20gJy4vYW5pbWF0aW9ucy9TcHJpbmdBbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge01hcHBpbmcsIEV2ZW50Q29uZmlnfSBmcm9tICcuL0FuaW1hdGVkRXZlbnQnO1xuXG5pbXBvcnQgQW5pbWF0ZWRDb2xvciBmcm9tICcuL25vZGVzL0FuaW1hdGVkQ29sb3InO1xuXG5leHBvcnQgdHlwZSBDb21wb3NpdGVBbmltYXRpb24gPSB7XG4gIHN0YXJ0OiAoY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spID0+IHZvaWQsXG4gIHN0b3A6ICgpID0+IHZvaWQsXG4gIHJlc2V0OiAoKSA9PiB2b2lkLFxuICBfc3RhcnROYXRpdmVMb29wOiAoaXRlcmF0aW9ucz86IG51bWJlcikgPT4gdm9pZCxcbiAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6ICgpID0+IGJvb2xlYW4sXG4gIC4uLlxufTtcblxuY29uc3QgYWRkID0gZnVuY3Rpb24gKFxuICBhOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4gIGI6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbik6IEFuaW1hdGVkQWRkaXRpb24ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkQWRkaXRpb24oYSwgYik7XG59O1xuXG5jb25zdCBzdWJ0cmFjdCA9IGZ1bmN0aW9uIChcbiAgYTogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuICBiOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4pOiBBbmltYXRlZFN1YnRyYWN0aW9uIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZFN1YnRyYWN0aW9uKGEsIGIpO1xufTtcblxuY29uc3QgZGl2aWRlID0gZnVuY3Rpb24gKFxuICBhOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4gIGI6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbik6IEFuaW1hdGVkRGl2aXNpb24ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkRGl2aXNpb24oYSwgYik7XG59O1xuXG5jb25zdCBtdWx0aXBseSA9IGZ1bmN0aW9uIChcbiAgYTogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuICBiOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4pOiBBbmltYXRlZE11bHRpcGxpY2F0aW9uIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZE11bHRpcGxpY2F0aW9uKGEsIGIpO1xufTtcblxuY29uc3QgbW9kdWxvID0gZnVuY3Rpb24gKGE6IEFuaW1hdGVkTm9kZSwgbW9kdWx1czogbnVtYmVyKTogQW5pbWF0ZWRNb2R1bG8ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkTW9kdWxvKGEsIG1vZHVsdXMpO1xufTtcblxuY29uc3QgZGlmZkNsYW1wID0gZnVuY3Rpb24gKFxuICBhOiBBbmltYXRlZE5vZGUsXG4gIG1pbjogbnVtYmVyLFxuICBtYXg6IG51bWJlcixcbik6IEFuaW1hdGVkRGlmZkNsYW1wIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZERpZmZDbGFtcChhLCBtaW4sIG1heCk7XG59O1xuXG5jb25zdCBfY29tYmluZUNhbGxiYWNrcyA9IGZ1bmN0aW9uIChcbiAgY2FsbGJhY2s6ID9FbmRDYWxsYmFjayxcbiAgY29uZmlnOiAkUmVhZE9ubHk8ey4uLkFuaW1hdGlvbkNvbmZpZywgLi4ufT4sXG4pIHtcbiAgaWYgKGNhbGxiYWNrICYmIGNvbmZpZy5vbkNvbXBsZXRlKSB7XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25maWcub25Db21wbGV0ZSAmJiBjb25maWcub25Db21wbGV0ZSguLi5hcmdzKTtcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrIHx8IGNvbmZpZy5vbkNvbXBsZXRlO1xuICB9XG59O1xuXG5jb25zdCBtYXliZVZlY3RvckFuaW0gPSBmdW5jdGlvbiAoXG4gIHZhbHVlOiBBbmltYXRlZFZhbHVlIHwgQW5pbWF0ZWRWYWx1ZVhZIHwgQW5pbWF0ZWRDb2xvcixcbiAgY29uZmlnOiBPYmplY3QsXG4gIGFuaW06ICh2YWx1ZTogQW5pbWF0ZWRWYWx1ZSwgY29uZmlnOiBPYmplY3QpID0+IENvbXBvc2l0ZUFuaW1hdGlvbixcbik6ID9Db21wb3NpdGVBbmltYXRpb24ge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZFZhbHVlWFkpIHtcbiAgICBjb25zdCBjb25maWdYID0gey4uLmNvbmZpZ307XG4gICAgY29uc3QgY29uZmlnWSA9IHsuLi5jb25maWd9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbmZpZykge1xuICAgICAgY29uc3Qge3gsIHl9ID0gY29uZmlnW2tleV07XG4gICAgICBpZiAoeCAhPT0gdW5kZWZpbmVkICYmIHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25maWdYW2tleV0gPSB4O1xuICAgICAgICBjb25maWdZW2tleV0gPSB5O1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhWCA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZFZhbHVlWFkpLngsIGNvbmZpZ1gpO1xuICAgIGNvbnN0IGFZID0gYW5pbSgodmFsdWU6IEFuaW1hdGVkVmFsdWVYWSkueSwgY29uZmlnWSk7XG4gICAgLy8gV2UgdXNlIGBzdG9wVG9nZXRoZXI6IGZhbHNlYCBoZXJlIGJlY2F1c2Ugb3RoZXJ3aXNlIHRyYWNraW5nIHdpbGwgYnJlYWtcbiAgICAvLyBiZWNhdXNlIHRoZSBzZWNvbmQgYW5pbWF0aW9uIHdpbGwgZ2V0IHN0b3BwZWQgYmVmb3JlIGl0IGNhbiB1cGRhdGUuXG4gICAgcmV0dXJuIHBhcmFsbGVsKFthWCwgYVldLCB7c3RvcFRvZ2V0aGVyOiBmYWxzZX0pO1xuICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWRDb2xvcikge1xuICAgIGNvbnN0IGNvbmZpZ1IgPSB7Li4uY29uZmlnfTtcbiAgICBjb25zdCBjb25maWdHID0gey4uLmNvbmZpZ307XG4gICAgY29uc3QgY29uZmlnQiA9IHsuLi5jb25maWd9O1xuICAgIGNvbnN0IGNvbmZpZ0EgPSB7Li4uY29uZmlnfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWcpIHtcbiAgICAgIGNvbnN0IHtyLCBnLCBiLCBhfSA9IGNvbmZpZ1trZXldO1xuICAgICAgaWYgKFxuICAgICAgICByICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgZyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGIgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBhICE9PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBjb25maWdSW2tleV0gPSByO1xuICAgICAgICBjb25maWdHW2tleV0gPSBnO1xuICAgICAgICBjb25maWdCW2tleV0gPSBiO1xuICAgICAgICBjb25maWdBW2tleV0gPSBhO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhUiA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZENvbG9yKS5yLCBjb25maWdSKTtcbiAgICBjb25zdCBhRyA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZENvbG9yKS5nLCBjb25maWdHKTtcbiAgICBjb25zdCBhQiA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZENvbG9yKS5iLCBjb25maWdCKTtcbiAgICBjb25zdCBhQSA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZENvbG9yKS5hLCBjb25maWdBKTtcbiAgICAvLyBXZSB1c2UgYHN0b3BUb2dldGhlcjogZmFsc2VgIGhlcmUgYmVjYXVzZSBvdGhlcndpc2UgdHJhY2tpbmcgd2lsbCBicmVha1xuICAgIC8vIGJlY2F1c2UgdGhlIHNlY29uZCBhbmltYXRpb24gd2lsbCBnZXQgc3RvcHBlZCBiZWZvcmUgaXQgY2FuIHVwZGF0ZS5cbiAgICByZXR1cm4gcGFyYWxsZWwoW2FSLCBhRywgYUIsIGFBXSwge3N0b3BUb2dldGhlcjogZmFsc2V9KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IHNwcmluZyA9IGZ1bmN0aW9uIChcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICBjb25maWc6IFNwcmluZ0FuaW1hdGlvbkNvbmZpZyxcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGNvbnN0IHN0YXJ0ID0gZnVuY3Rpb24gKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICAgIGNvbmZpZ3VyYXRpb246IFNwcmluZ0FuaW1hdGlvbkNvbmZpZyxcbiAgICBjYWxsYmFjaz86ID9FbmRDYWxsYmFjayxcbiAgKTogdm9pZCB7XG4gICAgY2FsbGJhY2sgPSBfY29tYmluZUNhbGxiYWNrcyhjYWxsYmFjaywgY29uZmlndXJhdGlvbik7XG4gICAgY29uc3Qgc2luZ2xlVmFsdWU6IGFueSA9IGFuaW1hdGVkVmFsdWU7XG4gICAgY29uc3Qgc2luZ2xlQ29uZmlnOiBhbnkgPSBjb25maWd1cmF0aW9uO1xuICAgIHNpbmdsZVZhbHVlLnN0b3BUcmFja2luZygpO1xuICAgIGlmIChjb25maWd1cmF0aW9uLnRvVmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUpIHtcbiAgICAgIHNpbmdsZVZhbHVlLnRyYWNrKFxuICAgICAgICBuZXcgQW5pbWF0ZWRUcmFja2luZyhcbiAgICAgICAgICBzaW5nbGVWYWx1ZSxcbiAgICAgICAgICBjb25maWd1cmF0aW9uLnRvVmFsdWUsXG4gICAgICAgICAgU3ByaW5nQW5pbWF0aW9uLFxuICAgICAgICAgIHNpbmdsZUNvbmZpZyxcbiAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpbmdsZVZhbHVlLmFuaW1hdGUobmV3IFNwcmluZ0FuaW1hdGlvbihzaW5nbGVDb25maWcpLCBjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gKFxuICAgIG1heWJlVmVjdG9yQW5pbSh2YWx1ZSwgY29uZmlnLCBzcHJpbmcpIHx8IHtcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgc3RhcnQodmFsdWUsIGNvbmZpZywgY2FsbGJhY2spO1xuICAgICAgfSxcblxuICAgICAgc3RvcDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICByZXNldDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5yZXNldEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24gKGl0ZXJhdGlvbnM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ29uZmlnID0gey4uLmNvbmZpZywgaXRlcmF0aW9uc307XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBzaW5nbGVDb25maWcpO1xuICAgICAgfSxcblxuICAgICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgfHwgZmFsc2U7XG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn07XG5cbmNvbnN0IHRpbWluZyA9IGZ1bmN0aW9uIChcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICBjb25maWc6IFRpbWluZ0FuaW1hdGlvbkNvbmZpZyxcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGNvbnN0IHN0YXJ0ID0gZnVuY3Rpb24gKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICAgIGNvbmZpZ3VyYXRpb246IFRpbWluZ0FuaW1hdGlvbkNvbmZpZyxcbiAgICBjYWxsYmFjaz86ID9FbmRDYWxsYmFjayxcbiAgKTogdm9pZCB7XG4gICAgY2FsbGJhY2sgPSBfY29tYmluZUNhbGxiYWNrcyhjYWxsYmFjaywgY29uZmlndXJhdGlvbik7XG4gICAgY29uc3Qgc2luZ2xlVmFsdWU6IGFueSA9IGFuaW1hdGVkVmFsdWU7XG4gICAgY29uc3Qgc2luZ2xlQ29uZmlnOiBhbnkgPSBjb25maWd1cmF0aW9uO1xuICAgIHNpbmdsZVZhbHVlLnN0b3BUcmFja2luZygpO1xuICAgIGlmIChjb25maWd1cmF0aW9uLnRvVmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZE5vZGUpIHtcbiAgICAgIHNpbmdsZVZhbHVlLnRyYWNrKFxuICAgICAgICBuZXcgQW5pbWF0ZWRUcmFja2luZyhcbiAgICAgICAgICBzaW5nbGVWYWx1ZSxcbiAgICAgICAgICBjb25maWd1cmF0aW9uLnRvVmFsdWUsXG4gICAgICAgICAgVGltaW5nQW5pbWF0aW9uLFxuICAgICAgICAgIHNpbmdsZUNvbmZpZyxcbiAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpbmdsZVZhbHVlLmFuaW1hdGUobmV3IFRpbWluZ0FuaW1hdGlvbihzaW5nbGVDb25maWcpLCBjYWxsYmFjayk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgbWF5YmVWZWN0b3JBbmltKHZhbHVlLCBjb25maWcsIHRpbWluZykgfHwge1xuICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChjYWxsYmFjaz86ID9FbmRDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICBzdGFydCh2YWx1ZSwgY29uZmlnLCBjYWxsYmFjayk7XG4gICAgICB9LFxuXG4gICAgICBzdG9wOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnN0b3BBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlc2V0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnJlc2V0QW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbiAoaXRlcmF0aW9ucz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBzaW5nbGVDb25maWcgPSB7Li4uY29uZmlnLCBpdGVyYXRpb25zfTtcbiAgICAgICAgc3RhcnQodmFsdWUsIHNpbmdsZUNvbmZpZyk7XG4gICAgICB9LFxuXG4gICAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29uZmlnLnVzZU5hdGl2ZURyaXZlciB8fCBmYWxzZTtcbiAgICAgIH0sXG4gICAgfVxuICApO1xufTtcblxuY29uc3QgZGVjYXkgPSBmdW5jdGlvbiAoXG4gIHZhbHVlOiBBbmltYXRlZFZhbHVlIHwgQW5pbWF0ZWRWYWx1ZVhZIHwgQW5pbWF0ZWRDb2xvcixcbiAgY29uZmlnOiBEZWNheUFuaW1hdGlvbkNvbmZpZyxcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGNvbnN0IHN0YXJ0ID0gZnVuY3Rpb24gKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFkgfCBBbmltYXRlZENvbG9yLFxuICAgIGNvbmZpZ3VyYXRpb246IERlY2F5QW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgRGVjYXlBbmltYXRpb24oc2luZ2xlQ29uZmlnKSwgY2FsbGJhY2spO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgbWF5YmVWZWN0b3JBbmltKHZhbHVlLCBjb25maWcsIGRlY2F5KSB8fCB7XG4gICAgICBzdGFydDogZnVuY3Rpb24gKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBjb25maWcsIGNhbGxiYWNrKTtcbiAgICAgIH0sXG5cbiAgICAgIHN0b3A6IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgcmVzZXQ6IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUucmVzZXRBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uIChpdGVyYXRpb25zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNpbmdsZUNvbmZpZyA9IHsuLi5jb25maWcsIGl0ZXJhdGlvbnN9O1xuICAgICAgICBzdGFydCh2YWx1ZSwgc2luZ2xlQ29uZmlnKTtcbiAgICAgIH0sXG5cbiAgICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbiAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcudXNlTmF0aXZlRHJpdmVyIHx8IGZhbHNlO1xuICAgICAgfSxcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBzZXF1ZW5jZSA9IGZ1bmN0aW9uIChcbiAgYW5pbWF0aW9uczogQXJyYXk8Q29tcG9zaXRlQW5pbWF0aW9uPixcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGxldCBjdXJyZW50ID0gMDtcbiAgcmV0dXJuIHtcbiAgICBzdGFydDogZnVuY3Rpb24gKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKSB7XG4gICAgICBjb25zdCBvbkNvbXBsZXRlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdC5maW5pc2hlZCkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudCsrO1xuXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbWF0aW9uc1tjdXJyZW50XS5zdGFydChvbkNvbXBsZXRlKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChhbmltYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7ZmluaXNoZWQ6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuaW1hdGlvbnNbY3VycmVudF0uc3RhcnQob25Db21wbGV0ZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjdXJyZW50IDwgYW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgYW5pbWF0aW9uc1tjdXJyZW50XS5zdG9wKCk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBhbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbiwgaWR4KSA9PiB7XG4gICAgICAgIGlmIChpZHggPD0gY3VycmVudCkge1xuICAgICAgICAgIGFuaW1hdGlvbi5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGN1cnJlbnQgPSAwO1xuICAgIH0sXG5cbiAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdMb29wcyBydW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIgY2Fubm90IGNvbnRhaW4gQW5pbWF0ZWQuc2VxdWVuY2UgYW5pbWF0aW9ucycsXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24gKCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gIH07XG59O1xuXG50eXBlIFBhcmFsbGVsQ29uZmlnID0ge1xuICAvLyBJZiBvbmUgaXMgc3RvcHBlZCwgc3RvcCBhbGwuICBkZWZhdWx0OiB0cnVlXG4gIHN0b3BUb2dldGhlcj86IGJvb2xlYW4sXG4gIC4uLlxufTtcbmNvbnN0IHBhcmFsbGVsID0gZnVuY3Rpb24gKFxuICBhbmltYXRpb25zOiBBcnJheTxDb21wb3NpdGVBbmltYXRpb24+LFxuICBjb25maWc/OiA/UGFyYWxsZWxDb25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBsZXQgZG9uZUNvdW50ID0gMDtcbiAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgY2FsbCBzdG9wKCkgYXQgbW9zdCBvbmNlIGZvciBlYWNoIGFuaW1hdGlvblxuICBjb25zdCBoYXNFbmRlZCA9IHt9O1xuICBjb25zdCBzdG9wVG9nZXRoZXIgPSAhKGNvbmZpZyAmJiBjb25maWcuc3RvcFRvZ2V0aGVyID09PSBmYWxzZSk7XG5cbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbiAoY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spIHtcbiAgICAgIGlmIChkb25lQ291bnQgPT09IGFuaW1hdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFuaW1hdGlvbnMuZm9yRWFjaCgoYW5pbWF0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgY29uc3QgY2IgPSBmdW5jdGlvbiAoZW5kUmVzdWx0KSB7XG4gICAgICAgICAgaGFzRW5kZWRbaWR4XSA9IHRydWU7XG4gICAgICAgICAgZG9uZUNvdW50Kys7XG4gICAgICAgICAgaWYgKGRvbmVDb3VudCA9PT0gYW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRvbmVDb3VudCA9IDA7XG4gICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhlbmRSZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghZW5kUmVzdWx0LmZpbmlzaGVkICYmIHN0b3BUb2dldGhlcikge1xuICAgICAgICAgICAgcmVzdWx0LnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFhbmltYXRpb24pIHtcbiAgICAgICAgICBjYih7ZmluaXNoZWQ6IHRydWV9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbmltYXRpb24uc3RhcnQoY2IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICAhaGFzRW5kZWRbaWR4XSAmJiBhbmltYXRpb24uc3RvcCgpO1xuICAgICAgICBoYXNFbmRlZFtpZHhdID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICBhbmltYXRpb24ucmVzZXQoKTtcbiAgICAgICAgaGFzRW5kZWRbaWR4XSA9IGZhbHNlO1xuICAgICAgICBkb25lQ291bnQgPSAwO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0xvb3BzIHJ1biB1c2luZyB0aGUgbmF0aXZlIGRyaXZlciBjYW5ub3QgY29udGFpbiBBbmltYXRlZC5wYXJhbGxlbCBhbmltYXRpb25zJyxcbiAgICAgICk7XG4gICAgfSxcblxuICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbiAoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuY29uc3QgZGVsYXkgPSBmdW5jdGlvbiAodGltZTogbnVtYmVyKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgLy8gV291bGQgYmUgbmljZSB0byBtYWtlIGEgc3BlY2lhbGl6ZWQgaW1wbGVtZW50YXRpb25cbiAgcmV0dXJuIHRpbWluZyhuZXcgQW5pbWF0ZWRWYWx1ZSgwKSwge1xuICAgIHRvVmFsdWU6IDAsXG4gICAgZGVsYXk6IHRpbWUsXG4gICAgZHVyYXRpb246IDAsXG4gICAgdXNlTmF0aXZlRHJpdmVyOiBmYWxzZSxcbiAgfSk7XG59O1xuXG5jb25zdCBzdGFnZ2VyID0gZnVuY3Rpb24gKFxuICB0aW1lOiBudW1iZXIsXG4gIGFuaW1hdGlvbnM6IEFycmF5PENvbXBvc2l0ZUFuaW1hdGlvbj4sXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICByZXR1cm4gcGFyYWxsZWwoXG4gICAgYW5pbWF0aW9ucy5tYXAoKGFuaW1hdGlvbiwgaSkgPT4ge1xuICAgICAgcmV0dXJuIHNlcXVlbmNlKFtkZWxheSh0aW1lICogaSksIGFuaW1hdGlvbl0pO1xuICAgIH0pLFxuICApO1xufTtcblxudHlwZSBMb29wQW5pbWF0aW9uQ29uZmlnID0ge1xuICBpdGVyYXRpb25zOiBudW1iZXIsXG4gIHJlc2V0QmVmb3JlSXRlcmF0aW9uPzogYm9vbGVhbixcbiAgLi4uXG59O1xuXG5jb25zdCBsb29wID0gZnVuY3Rpb24gKFxuICBhbmltYXRpb246IENvbXBvc2l0ZUFuaW1hdGlvbixcbiAge2l0ZXJhdGlvbnMgPSAtMSwgcmVzZXRCZWZvcmVJdGVyYXRpb24gPSB0cnVlfTogTG9vcEFuaW1hdGlvbkNvbmZpZyA9IHt9LFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgbGV0IGlzRmluaXNoZWQgPSBmYWxzZTtcbiAgbGV0IGl0ZXJhdGlvbnNTb0ZhciA9IDA7XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uIChjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykge1xuICAgICAgY29uc3QgcmVzdGFydCA9IGZ1bmN0aW9uIChyZXN1bHQ6IEVuZFJlc3VsdCA9IHtmaW5pc2hlZDogdHJ1ZX0pOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzRmluaXNoZWQgfHxcbiAgICAgICAgICBpdGVyYXRpb25zU29GYXIgPT09IGl0ZXJhdGlvbnMgfHxcbiAgICAgICAgICByZXN1bHQuZmluaXNoZWQgPT09IGZhbHNlXG4gICAgICAgICkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlcmF0aW9uc1NvRmFyKys7XG4gICAgICAgICAgcmVzZXRCZWZvcmVJdGVyYXRpb24gJiYgYW5pbWF0aW9uLnJlc2V0KCk7XG4gICAgICAgICAgYW5pbWF0aW9uLnN0YXJ0KHJlc3RhcnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKCFhbmltYXRpb24gfHwgaXRlcmF0aW9ucyA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7ZmluaXNoZWQ6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhbmltYXRpb24uX2lzVXNpbmdOYXRpdmVEcml2ZXIoKSkge1xuICAgICAgICAgIGFuaW1hdGlvbi5fc3RhcnROYXRpdmVMb29wKGl0ZXJhdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3RhcnQoKTsgLy8gU3RhcnQgbG9vcGluZyByZWN1cnNpdmVseSBvbiB0aGUganMgdGhyZWFkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgaXNGaW5pc2hlZCA9IHRydWU7XG4gICAgICBhbmltYXRpb24uc3RvcCgpO1xuICAgIH0sXG5cbiAgICByZXNldDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgaXRlcmF0aW9uc1NvRmFyID0gMDtcbiAgICAgIGlzRmluaXNoZWQgPSBmYWxzZTtcbiAgICAgIGFuaW1hdGlvbi5yZXNldCgpO1xuICAgIH0sXG5cbiAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdMb29wcyBydW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIgY2Fubm90IGNvbnRhaW4gQW5pbWF0ZWQubG9vcCBhbmltYXRpb25zJyxcbiAgICAgICk7XG4gICAgfSxcblxuICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbiAoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gYW5pbWF0aW9uLl9pc1VzaW5nTmF0aXZlRHJpdmVyKCk7XG4gICAgfSxcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGZvcmtFdmVudChcbiAgZXZlbnQ6ID9BbmltYXRlZEV2ZW50IHwgP0Z1bmN0aW9uLFxuICBsaXN0ZW5lcjogRnVuY3Rpb24sXG4pOiBBbmltYXRlZEV2ZW50IHwgRnVuY3Rpb24ge1xuICBpZiAoIWV2ZW50KSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyO1xuICB9IGVsc2UgaWYgKGV2ZW50IGluc3RhbmNlb2YgQW5pbWF0ZWRFdmVudCkge1xuICAgIGV2ZW50Ll9fYWRkTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgIHJldHVybiBldmVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICAgIHR5cGVvZiBldmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiBldmVudCguLi5hcmdzKTtcbiAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gdW5mb3JrRXZlbnQoXG4gIGV2ZW50OiA/QW5pbWF0ZWRFdmVudCB8ID9GdW5jdGlvbixcbiAgbGlzdGVuZXI6IEZ1bmN0aW9uLFxuKTogdm9pZCB7XG4gIGlmIChldmVudCAmJiBldmVudCBpbnN0YW5jZW9mIEFuaW1hdGVkRXZlbnQpIHtcbiAgICBldmVudC5fX3JlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTtcbiAgfVxufVxuXG5jb25zdCBldmVudCA9IGZ1bmN0aW9uIChcbiAgYXJnTWFwcGluZzogJFJlYWRPbmx5QXJyYXk8P01hcHBpbmc+LFxuICBjb25maWc6IEV2ZW50Q29uZmlnLFxuKTogYW55IHtcbiAgY29uc3QgYW5pbWF0ZWRFdmVudCA9IG5ldyBBbmltYXRlZEV2ZW50KGFyZ01hcHBpbmcsIGNvbmZpZyk7XG4gIGlmIChhbmltYXRlZEV2ZW50Ll9faXNOYXRpdmUpIHtcbiAgICByZXR1cm4gYW5pbWF0ZWRFdmVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYW5pbWF0ZWRFdmVudC5fX2dldEhhbmRsZXIoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgYEFuaW1hdGVkYCBsaWJyYXJ5IGlzIGRlc2lnbmVkIHRvIG1ha2UgYW5pbWF0aW9ucyBmbHVpZCwgcG93ZXJmdWwsIGFuZFxuICogZWFzeSB0byBidWlsZCBhbmQgbWFpbnRhaW4uIGBBbmltYXRlZGAgZm9jdXNlcyBvbiBkZWNsYXJhdGl2ZSByZWxhdGlvbnNoaXBzXG4gKiBiZXR3ZWVuIGlucHV0cyBhbmQgb3V0cHV0cywgd2l0aCBjb25maWd1cmFibGUgdHJhbnNmb3JtcyBpbiBiZXR3ZWVuLCBhbmRcbiAqIHNpbXBsZSBgc3RhcnRgL2BzdG9wYCBtZXRob2RzIHRvIGNvbnRyb2wgdGltZS1iYXNlZCBhbmltYXRpb24gZXhlY3V0aW9uLlxuICogSWYgYWRkaXRpb25hbCB0cmFuc2Zvcm1zIGFyZSBhZGRlZCwgYmUgc3VyZSB0byBpbmNsdWRlIHRoZW0gaW5cbiAqIEFuaW1hdGVkTW9jay5qcyBhcyB3ZWxsLlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvKipcbiAgICogU3RhbmRhcmQgdmFsdWUgY2xhc3MgZm9yIGRyaXZpbmcgYW5pbWF0aW9ucy4gIFR5cGljYWxseSBpbml0aWFsaXplZCB3aXRoXG4gICAqIGBuZXcgQW5pbWF0ZWQuVmFsdWUoMCk7YFxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCN2YWx1ZVxuICAgKi9cbiAgVmFsdWU6IEFuaW1hdGVkVmFsdWUsXG4gIC8qKlxuICAgKiAyRCB2YWx1ZSBjbGFzcyBmb3IgZHJpdmluZyAyRCBhbmltYXRpb25zLCBzdWNoIGFzIHBhbiBnZXN0dXJlcy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZXh5XG4gICAqL1xuICBWYWx1ZVhZOiBBbmltYXRlZFZhbHVlWFksXG4gIC8qKlxuICAgKiBWYWx1ZSBjbGFzcyBmb3IgZHJpdmluZyBjb2xvciBhbmltYXRpb25zLlxuICAgKi9cbiAgQ29sb3I6IEFuaW1hdGVkQ29sb3IsXG4gIC8qKlxuICAgKiBFeHBvcnRlZCB0byB1c2UgdGhlIEludGVycG9sYXRpb24gdHlwZSBpbiBmbG93LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNpbnRlcnBvbGF0aW9uXG4gICAqL1xuICBJbnRlcnBvbGF0aW9uOiBBbmltYXRlZEludGVycG9sYXRpb24sXG4gIC8qKlxuICAgKiBFeHBvcnRlZCBmb3IgZWFzZSBvZiB0eXBlIGNoZWNraW5nLiBBbGwgYW5pbWF0ZWQgdmFsdWVzIGRlcml2ZSBmcm9tIHRoaXNcbiAgICogY2xhc3MuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI25vZGVcbiAgICovXG4gIE5vZGU6IEFuaW1hdGVkTm9kZSxcblxuICAvKipcbiAgICogQW5pbWF0ZXMgYSB2YWx1ZSBmcm9tIGFuIGluaXRpYWwgdmVsb2NpdHkgdG8gemVybyBiYXNlZCBvbiBhIGRlY2F5XG4gICAqIGNvZWZmaWNpZW50LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNkZWNheVxuICAgKi9cbiAgZGVjYXksXG4gIC8qKlxuICAgKiBBbmltYXRlcyBhIHZhbHVlIGFsb25nIGEgdGltZWQgZWFzaW5nIGN1cnZlLiBUaGUgRWFzaW5nIG1vZHVsZSBoYXMgdG9ucyBvZlxuICAgKiBwcmVkZWZpbmVkIGN1cnZlcywgb3IgeW91IGNhbiB1c2UgeW91ciBvd24gZnVuY3Rpb24uXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI3RpbWluZ1xuICAgKi9cbiAgdGltaW5nLFxuICAvKipcbiAgICogQW5pbWF0ZXMgYSB2YWx1ZSBhY2NvcmRpbmcgdG8gYW4gYW5hbHl0aWNhbCBzcHJpbmcgbW9kZWwgYmFzZWQgb25cbiAgICogZGFtcGVkIGhhcm1vbmljIG9zY2lsbGF0aW9uLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNzcHJpbmdcbiAgICovXG4gIHNwcmluZyxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBbmltYXRlZCB2YWx1ZSBjb21wb3NlZCBmcm9tIHR3byBBbmltYXRlZCB2YWx1ZXMgYWRkZWRcbiAgICogdG9nZXRoZXIuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2FkZFxuICAgKi9cbiAgYWRkLFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIGNvbXBvc2VkIGJ5IHN1YnRyYWN0aW5nIHRoZSBzZWNvbmQgQW5pbWF0ZWRcbiAgICogdmFsdWUgZnJvbSB0aGUgZmlyc3QgQW5pbWF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI3N1YnRyYWN0XG4gICAqL1xuICBzdWJ0cmFjdCxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBbmltYXRlZCB2YWx1ZSBjb21wb3NlZCBieSBkaXZpZGluZyB0aGUgZmlyc3QgQW5pbWF0ZWQgdmFsdWVcbiAgICogYnkgdGhlIHNlY29uZCBBbmltYXRlZCB2YWx1ZS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjZGl2aWRlXG4gICAqL1xuICBkaXZpZGUsXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgY29tcG9zZWQgZnJvbSB0d28gQW5pbWF0ZWQgdmFsdWVzIG11bHRpcGxpZWRcbiAgICogdG9nZXRoZXIuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI211bHRpcGx5XG4gICAqL1xuICBtdWx0aXBseSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBbmltYXRlZCB2YWx1ZSB0aGF0IGlzIHRoZSAobm9uLW5lZ2F0aXZlKSBtb2R1bG8gb2YgdGhlXG4gICAqIHByb3ZpZGVkIEFuaW1hdGVkIHZhbHVlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNtb2R1bG9cbiAgICovXG4gIG1vZHVsbyxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IEFuaW1hdGVkIHZhbHVlIHRoYXQgaXMgbGltaXRlZCBiZXR3ZWVuIDIgdmFsdWVzLiBJdCB1c2VzIHRoZVxuICAgKiBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGxhc3QgdmFsdWUgc28gZXZlbiBpZiB0aGUgdmFsdWUgaXMgZmFyIGZyb20gdGhlXG4gICAqIGJvdW5kcyBpdCB3aWxsIHN0YXJ0IGNoYW5naW5nIHdoZW4gdGhlIHZhbHVlIHN0YXJ0cyBnZXR0aW5nIGNsb3NlciBhZ2Fpbi5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjZGlmZmNsYW1wXG4gICAqL1xuICBkaWZmQ2xhbXAsXG5cbiAgLyoqXG4gICAqIFN0YXJ0cyBhbiBhbmltYXRpb24gYWZ0ZXIgdGhlIGdpdmVuIGRlbGF5LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNkZWxheVxuICAgKi9cbiAgZGVsYXksXG4gIC8qKlxuICAgKiBTdGFydHMgYW4gYXJyYXkgb2YgYW5pbWF0aW9ucyBpbiBvcmRlciwgd2FpdGluZyBmb3IgZWFjaCB0byBjb21wbGV0ZVxuICAgKiBiZWZvcmUgc3RhcnRpbmcgdGhlIG5leHQuIElmIHRoZSBjdXJyZW50IHJ1bm5pbmcgYW5pbWF0aW9uIGlzIHN0b3BwZWQsIG5vXG4gICAqIGZvbGxvd2luZyBhbmltYXRpb25zIHdpbGwgYmUgc3RhcnRlZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjc2VxdWVuY2VcbiAgICovXG4gIHNlcXVlbmNlLFxuICAvKipcbiAgICogU3RhcnRzIGFuIGFycmF5IG9mIGFuaW1hdGlvbnMgYWxsIGF0IHRoZSBzYW1lIHRpbWUuIEJ5IGRlZmF1bHQsIGlmIG9uZVxuICAgKiBvZiB0aGUgYW5pbWF0aW9ucyBpcyBzdG9wcGVkLCB0aGV5IHdpbGwgYWxsIGJlIHN0b3BwZWQuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICogdGhpcyB3aXRoIHRoZSBgc3RvcFRvZ2V0aGVyYCBmbGFnLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNwYXJhbGxlbFxuICAgKi9cbiAgcGFyYWxsZWwsXG4gIC8qKlxuICAgKiBBcnJheSBvZiBhbmltYXRpb25zIG1heSBydW4gaW4gcGFyYWxsZWwgKG92ZXJsYXApLCBidXQgYXJlIHN0YXJ0ZWQgaW5cbiAgICogc2VxdWVuY2Ugd2l0aCBzdWNjZXNzaXZlIGRlbGF5cy4gIE5pY2UgZm9yIGRvaW5nIHRyYWlsaW5nIGVmZmVjdHMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI3N0YWdnZXJcbiAgICovXG4gIHN0YWdnZXIsXG4gIC8qKlxuICAgKiBMb29wcyBhIGdpdmVuIGFuaW1hdGlvbiBjb250aW51b3VzbHksIHNvIHRoYXQgZWFjaCB0aW1lIGl0IHJlYWNoZXMgdGhlXG4gICAqIGVuZCwgaXQgcmVzZXRzIGFuZCBiZWdpbnMgYWdhaW4gZnJvbSB0aGUgc3RhcnQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkI2xvb3BcbiAgICovXG4gIGxvb3AsXG5cbiAgLyoqXG4gICAqIFRha2VzIGFuIGFycmF5IG9mIG1hcHBpbmdzIGFuZCBleHRyYWN0cyB2YWx1ZXMgZnJvbSBlYWNoIGFyZyBhY2NvcmRpbmdseSxcbiAgICogdGhlbiBjYWxscyBgc2V0VmFsdWVgIG9uIHRoZSBtYXBwZWQgb3V0cHV0cy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjZXZlbnRcbiAgICovXG4gIGV2ZW50LFxuXG4gIC8qKlxuICAgKiBNYWtlIGFueSBSZWFjdCBjb21wb25lbnQgQW5pbWF0YWJsZS4gIFVzZWQgdG8gY3JlYXRlIGBBbmltYXRlZC5WaWV3YCwgZXRjLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNjcmVhdGVhbmltYXRlZGNvbXBvbmVudFxuICAgKi9cbiAgY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQsXG5cbiAgLyoqXG4gICAqIEltcGVyYXRpdmUgQVBJIHRvIGF0dGFjaCBhbiBhbmltYXRlZCB2YWx1ZSB0byBhbiBldmVudCBvbiBhIHZpZXcuIFByZWZlclxuICAgKiB1c2luZyBgQW5pbWF0ZWQuZXZlbnRgIHdpdGggYHVzZU5hdGl2ZURyaXZlOiB0cnVlYCBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQjYXR0YWNobmF0aXZlZXZlbnRcbiAgICovXG4gIGF0dGFjaE5hdGl2ZUV2ZW50LFxuXG4gIC8qKlxuICAgKiBBZHZhbmNlZCBpbXBlcmF0aXZlIEFQSSBmb3Igc25vb3Bpbmcgb24gYW5pbWF0ZWQgZXZlbnRzIHRoYXQgYXJlIHBhc3NlZCBpblxuICAgKiB0aHJvdWdoIHByb3BzLiBVc2UgdmFsdWVzIGRpcmVjdGx5IHdoZXJlIHBvc3NpYmxlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZCNmb3JrZXZlbnRcbiAgICovXG4gIGZvcmtFdmVudCxcbiAgdW5mb3JrRXZlbnQsXG5cbiAgLyoqXG4gICAqIEV4cG9zZSBFdmVudCBjbGFzcywgc28gaXQgY2FuIGJlIHVzZWQgYXMgYSB0eXBlIGZvciB0eXBlIGNoZWNrZXJzLlxuICAgKi9cbiAgRXZlbnQ6IEFuaW1hdGVkRXZlbnQsXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFVQTs7OztBQThCQTs7QUE1QkEsZUFBMkNBLE9BQU8sbUJBQWxEO0FBQUEsSUFBT0MsYUFBUCxZQUFPQSxhQUFQO0FBQUEsSUFBc0JDLGlCQUF0QixZQUFzQkEsaUJBQXRCOztBQUNBLElBQU1DLGdCQUFnQixHQUFHSCxPQUFPLDRCQUFoQzs7QUFDQSxJQUFNSSxpQkFBaUIsR0FBR0osT0FBTyw2QkFBakM7O0FBQ0EsSUFBTUssZ0JBQWdCLEdBQUdMLE9BQU8sNEJBQWhD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