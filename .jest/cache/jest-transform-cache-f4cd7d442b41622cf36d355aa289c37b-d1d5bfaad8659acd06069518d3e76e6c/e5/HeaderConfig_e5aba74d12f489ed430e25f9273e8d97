5c057c0a9f9bd28b06ba2a457eb5b6c5
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = HeaderConfig;

var _elements = require("@react-navigation/elements");

var _native = require("@react-navigation/native");

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _reactNativeSafeAreaContext = require("react-native-safe-area-context");

var _reactNativeScreens = require("react-native-screens");

var _FontProcessor = require("./FontProcessor");

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function HeaderConfig(_ref) {
  var _ref2, _headerTitleStyleFlat, _headerStyleFlattened;

  var headerHeight = _ref.headerHeight,
      headerBackImageSource = _ref.headerBackImageSource,
      headerBackButtonMenuEnabled = _ref.headerBackButtonMenuEnabled,
      headerBackTitle = _ref.headerBackTitle,
      headerBackTitleStyle = _ref.headerBackTitleStyle,
      _ref$headerBackTitleV = _ref.headerBackTitleVisible,
      headerBackTitleVisible = _ref$headerBackTitleV === void 0 ? true : _ref$headerBackTitleV,
      headerBackVisible = _ref.headerBackVisible,
      headerShadowVisible = _ref.headerShadowVisible,
      headerLargeStyle = _ref.headerLargeStyle,
      headerLargeTitle = _ref.headerLargeTitle,
      headerLargeTitleShadowVisible = _ref.headerLargeTitleShadowVisible,
      headerLargeTitleStyle = _ref.headerLargeTitleStyle,
      headerBackground = _ref.headerBackground,
      headerLeft = _ref.headerLeft,
      headerRight = _ref.headerRight,
      headerShown = _ref.headerShown,
      headerStyle = _ref.headerStyle,
      headerBlurEffect = _ref.headerBlurEffect,
      headerTintColor = _ref.headerTintColor,
      headerTitle = _ref.headerTitle,
      headerTitleAlign = _ref.headerTitleAlign,
      headerTitleStyle = _ref.headerTitleStyle,
      headerTransparent = _ref.headerTransparent,
      headerSearchBarOptions = _ref.headerSearchBarOptions,
      route = _ref.route,
      title = _ref.title,
      canGoBack = _ref.canGoBack;
  var insets = (0, _reactNativeSafeAreaContext.useSafeAreaInsets)();

  var _ref3 = (0, _native.useTheme)(),
      colors = _ref3.colors;

  var tintColor = headerTintColor !== null && headerTintColor !== void 0 ? headerTintColor : _reactNative.Platform.OS === 'ios' ? colors.primary : colors.text;
  var headerBackTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerBackTitleStyle) || {};
  var headerLargeTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerLargeTitleStyle) || {};
  var headerTitleStyleFlattened = _reactNative.StyleSheet.flatten(headerTitleStyle) || {};
  var headerStyleFlattened = _reactNative.StyleSheet.flatten(headerStyle) || {};
  var headerLargeStyleFlattened = _reactNative.StyleSheet.flatten(headerLargeStyle) || {};

  var _ref4 = (0, _FontProcessor.processFonts)([headerBackTitleStyleFlattened.fontFamily, headerLargeTitleStyleFlattened.fontFamily, headerTitleStyleFlattened.fontFamily]),
      _ref5 = (0, _slicedToArray2.default)(_ref4, 3),
      backTitleFontFamily = _ref5[0],
      largeTitleFontFamily = _ref5[1],
      titleFontFamily = _ref5[2];

  var titleText = (0, _elements.getHeaderTitle)({
    title: title,
    headerTitle: headerTitle
  }, route.name);
  var titleColor = (_ref2 = (_headerTitleStyleFlat = headerTitleStyleFlattened.color) !== null && _headerTitleStyleFlat !== void 0 ? _headerTitleStyleFlat : headerTintColor) !== null && _ref2 !== void 0 ? _ref2 : colors.text;
  var titleFontSize = headerTitleStyleFlattened.fontSize;
  var titleFontWeight = headerTitleStyleFlattened.fontWeight;
  var headerTitleStyleSupported = {
    color: titleColor
  };

  if (headerTitleStyleFlattened.fontFamily != null) {
    headerTitleStyleSupported.fontFamily = headerTitleStyleFlattened.fontFamily;
  }

  if (titleFontSize != null) {
    headerTitleStyleSupported.fontSize = titleFontSize;
  }

  if (titleFontWeight != null) {
    headerTitleStyleSupported.fontWeight = titleFontWeight;
  }

  var headerLeftElement = headerLeft === null || headerLeft === void 0 ? void 0 : headerLeft({
    tintColor: tintColor,
    canGoBack: canGoBack,
    label: headerBackTitle
  });
  var headerRightElement = headerRight === null || headerRight === void 0 ? void 0 : headerRight({
    tintColor: tintColor,
    canGoBack: canGoBack
  });
  var headerTitleElement = typeof headerTitle === 'function' ? headerTitle({
    tintColor: tintColor,
    children: titleText
  }) : null;
  var supportsHeaderSearchBar = typeof _reactNativeScreens.isSearchBarAvailableForCurrentPlatform === 'boolean' ? _reactNativeScreens.isSearchBarAvailableForCurrentPlatform : _reactNative.Platform.OS === 'ios' && _reactNativeScreens.SearchBar != null;
  var hasHeaderSearchBar = supportsHeaderSearchBar && headerSearchBarOptions != null;

  if (headerSearchBarOptions != null && !supportsHeaderSearchBar) {
    throw new Error("The current version of 'react-native-screens' doesn't support SearchBar in the header. Please update to the latest version to use this option.");
  }

  var backButtonInCustomView = headerBackVisible ? headerLeftElement != null : _reactNative.Platform.OS === 'android' && headerTitleElement != null;
  var translucent = headerBackground != null || headerTransparent || (hasHeaderSearchBar || headerLargeTitle) && _reactNative.Platform.OS === 'ios' && headerTransparent !== false;
  return React.createElement(React.Fragment, null, headerBackground != null ? React.createElement(_reactNative.View, {
    style: [styles.background, headerTransparent ? styles.translucent : null, {
      height: headerHeight
    }]
  }, headerBackground()) : null, React.createElement(_reactNativeScreens.ScreenStackHeaderConfig, {
    backButtonInCustomView: backButtonInCustomView,
    backgroundColor: (_headerStyleFlattened = headerStyleFlattened.backgroundColor) !== null && _headerStyleFlattened !== void 0 ? _headerStyleFlattened : headerBackground != null || headerTransparent ? 'transparent' : colors.card,
    backTitle: headerBackTitleVisible ? headerBackTitle : ' ',
    backTitleFontFamily: backTitleFontFamily,
    backTitleFontSize: headerBackTitleStyleFlattened.fontSize,
    blurEffect: headerBlurEffect,
    color: tintColor,
    direction: _reactNative.I18nManager.isRTL ? 'rtl' : 'ltr',
    disableBackButtonMenu: headerBackButtonMenuEnabled === false,
    hidden: headerShown === false,
    hideBackButton: headerBackVisible === false,
    hideShadow: headerShadowVisible === false || headerBackground != null || headerTransparent,
    largeTitle: headerLargeTitle,
    largeTitleBackgroundColor: headerLargeStyleFlattened.backgroundColor,
    largeTitleColor: headerLargeTitleStyleFlattened.color,
    largeTitleFontFamily: largeTitleFontFamily,
    largeTitleFontSize: headerLargeTitleStyleFlattened.fontSize,
    largeTitleFontWeight: headerLargeTitleStyleFlattened.fontWeight,
    largeTitleHideShadow: headerLargeTitleShadowVisible === false,
    title: titleText,
    titleColor: titleColor,
    titleFontFamily: titleFontFamily,
    titleFontSize: titleFontSize,
    titleFontWeight: titleFontWeight,
    topInsetEnabled: insets.top !== 0,
    translucent: translucent === true
  }, _reactNative.Platform.OS === 'ios' ? React.createElement(React.Fragment, null, headerLeftElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderLeftView, null, headerLeftElement) : null, headerTitleElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderCenterView, null, headerTitleElement) : null) : React.createElement(React.Fragment, null, headerLeftElement != null || typeof headerTitle === 'function' ? React.createElement(_reactNativeScreens.ScreenStackHeaderLeftView, null, React.createElement(_reactNative.View, {
    style: styles.row
  }, headerLeftElement, headerTitleAlign !== 'center' ? typeof headerTitle === 'function' ? headerTitleElement : React.createElement(_elements.HeaderTitle, {
    tintColor: tintColor,
    style: headerTitleStyleSupported
  }, titleText) : null)) : null, headerTitleAlign === 'center' ? React.createElement(_reactNativeScreens.ScreenStackHeaderCenterView, null, typeof headerTitle === 'function' ? headerTitleElement : React.createElement(_elements.HeaderTitle, {
    tintColor: tintColor,
    style: headerTitleStyleSupported
  }, titleText)) : null), headerBackImageSource !== undefined ? React.createElement(_reactNativeScreens.ScreenStackHeaderBackButtonImage, {
    source: headerBackImageSource
  }) : null, headerRightElement != null ? React.createElement(_reactNativeScreens.ScreenStackHeaderRightView, null, headerRightElement) : null, hasHeaderSearchBar ? React.createElement(_reactNativeScreens.ScreenStackHeaderSearchBarView, null, React.createElement(_reactNativeScreens.SearchBar, headerSearchBarOptions)) : null));
}

var styles = _reactNative.StyleSheet.create({
  row: {
    flexDirection: 'row',
    alignItems: 'center'
  },
  translucent: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    zIndex: 1
  },
  background: {
    overflow: 'hidden'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXRCQSxHQUNDVSxvQkFBQ00sOENBQUQsUUFDR2hCLGtCQURILENBRERBLEdBSUcsSUFqR04sRUFrR0dNLGtCQUFrQixHQUNqQkksb0JBQUNNLGtEQUFELFFBQ0VOLG9CQUFDTSw2QkFBRCxFQUFlakQsc0JBQWYsQ0FERixDQURpQixHQUlmLElBdEdOLENBWkYsQ0FERjtBQXVIRDs7QUFFRCxJQUFNOEMsTUFBTSxHQUFHbEMsd0JBQVc4RCxNQUFYOUQsQ0FBa0I7RUFDL0IwRCxHQUFHLEVBQUU7SUFDSEssYUFBYSxFQUFFLEtBRFo7SUFFSEMsVUFBVSxFQUFFO0VBRlQsQ0FEMEI7RUFLL0JsQyxXQUFXLEVBQUU7SUFDWG1DLFFBQVEsRUFBRSxVQURDO0lBRVhSLEdBQUcsRUFBRSxDQUZNO0lBR1hTLElBQUksRUFBRSxDQUhLO0lBSVhDLEtBQUssRUFBRSxDQUpJO0lBS1hDLE1BQU0sRUFBRTtFQUxHLENBTGtCO0VBWS9CakMsVUFBVSxFQUFFO0lBQ1ZrQyxRQUFRLEVBQUU7RUFEQTtBQVptQixDQUFsQnJFLENBQWYiLCJuYW1lcyI6WyJIZWFkZXJDb25maWciLCJoZWFkZXJIZWlnaHQiLCJoZWFkZXJCYWNrSW1hZ2VTb3VyY2UiLCJoZWFkZXJCYWNrQnV0dG9uTWVudUVuYWJsZWQiLCJoZWFkZXJCYWNrVGl0bGUiLCJoZWFkZXJCYWNrVGl0bGVTdHlsZSIsImhlYWRlckJhY2tUaXRsZVZpc2libGUiLCJoZWFkZXJCYWNrVmlzaWJsZSIsImhlYWRlclNoYWRvd1Zpc2libGUiLCJoZWFkZXJMYXJnZVN0eWxlIiwiaGVhZGVyTGFyZ2VUaXRsZSIsImhlYWRlckxhcmdlVGl0bGVTaGFkb3dWaXNpYmxlIiwiaGVhZGVyTGFyZ2VUaXRsZVN0eWxlIiwiaGVhZGVyQmFja2dyb3VuZCIsImhlYWRlckxlZnQiLCJoZWFkZXJSaWdodCIsImhlYWRlclNob3duIiwiaGVhZGVyU3R5bGUiLCJoZWFkZXJCbHVyRWZmZWN0IiwiaGVhZGVyVGludENvbG9yIiwiaGVhZGVyVGl0bGUiLCJoZWFkZXJUaXRsZUFsaWduIiwiaGVhZGVyVGl0bGVTdHlsZSIsImhlYWRlclRyYW5zcGFyZW50IiwiaGVhZGVyU2VhcmNoQmFyT3B0aW9ucyIsInJvdXRlIiwidGl0bGUiLCJjYW5Hb0JhY2siLCJpbnNldHMiLCJjb2xvcnMiLCJ0aW50Q29sb3IiLCJQbGF0Zm9ybSIsIk9TIiwicHJpbWFyeSIsInRleHQiLCJoZWFkZXJCYWNrVGl0bGVTdHlsZUZsYXR0ZW5lZCIsIlN0eWxlU2hlZXQiLCJmbGF0dGVuIiwiaGVhZGVyTGFyZ2VUaXRsZVN0eWxlRmxhdHRlbmVkIiwiaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZCIsImhlYWRlclN0eWxlRmxhdHRlbmVkIiwiaGVhZGVyTGFyZ2VTdHlsZUZsYXR0ZW5lZCIsImZvbnRGYW1pbHkiLCJiYWNrVGl0bGVGb250RmFtaWx5IiwibGFyZ2VUaXRsZUZvbnRGYW1pbHkiLCJ0aXRsZUZvbnRGYW1pbHkiLCJ0aXRsZVRleHQiLCJuYW1lIiwidGl0bGVDb2xvciIsImNvbG9yIiwidGl0bGVGb250U2l6ZSIsImZvbnRTaXplIiwidGl0bGVGb250V2VpZ2h0IiwiZm9udFdlaWdodCIsImhlYWRlclRpdGxlU3R5bGVTdXBwb3J0ZWQiLCJoZWFkZXJMZWZ0RWxlbWVudCIsImxhYmVsIiwiaGVhZGVyUmlnaHRFbGVtZW50IiwiaGVhZGVyVGl0bGVFbGVtZW50IiwiY2hpbGRyZW4iLCJzdXBwb3J0c0hlYWRlclNlYXJjaEJhciIsImlzU2VhcmNoQmFyQXZhaWxhYmxlRm9yQ3VycmVudFBsYXRmb3JtIiwiU2VhcmNoQmFyIiwiaGFzSGVhZGVyU2VhcmNoQmFyIiwiRXJyb3IiLCJiYWNrQnV0dG9uSW5DdXN0b21WaWV3IiwidHJhbnNsdWNlbnQiLCJSZWFjdCIsIl9yZWFjdE5hdGl2ZSIsInN0eWxlIiwic3R5bGVzIiwiYmFja2dyb3VuZCIsImhlaWdodCIsIl9yZWFjdE5hdGl2ZVNjcmVlbnMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjYXJkIiwiYmFja1RpdGxlIiwiYmFja1RpdGxlRm9udFNpemUiLCJibHVyRWZmZWN0IiwiZGlyZWN0aW9uIiwiSTE4bk1hbmFnZXIiLCJpc1JUTCIsImRpc2FibGVCYWNrQnV0dG9uTWVudSIsImhpZGRlbiIsImhpZGVCYWNrQnV0dG9uIiwiaGlkZVNoYWRvdyIsImxhcmdlVGl0bGUiLCJsYXJnZVRpdGxlQmFja2dyb3VuZENvbG9yIiwibGFyZ2VUaXRsZUNvbG9yIiwibGFyZ2VUaXRsZUZvbnRTaXplIiwibGFyZ2VUaXRsZUZvbnRXZWlnaHQiLCJsYXJnZVRpdGxlSGlkZVNoYWRvdyIsInRvcEluc2V0RW5hYmxlZCIsInRvcCIsInJvdyIsIl9lbGVtZW50cyIsInVuZGVmaW5lZCIsInNvdXJjZSIsImNyZWF0ZSIsImZsZXhEaXJlY3Rpb24iLCJhbGlnbkl0ZW1zIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJ6SW5kZXgiLCJvdmVyZmxvdyJdLCJzb3VyY2VzIjpbIkhlYWRlckNvbmZpZy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SGVhZGVyVGl0bGUsIEhlYWRlclRpdGxlIH0gZnJvbSAnQHJlYWN0LW5hdmlnYXRpb24vZWxlbWVudHMnO1xuaW1wb3J0IHsgUm91dGUsIHVzZVRoZW1lIH0gZnJvbSAnQHJlYWN0LW5hdmlnYXRpb24vbmF0aXZlJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIEkxOG5NYW5hZ2VyLFxuICBQbGF0Zm9ybSxcbiAgU3R5bGVTaGVldCxcbiAgVGV4dFN0eWxlLFxuICBWaWV3LFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHsgdXNlU2FmZUFyZWFJbnNldHMgfSBmcm9tICdyZWFjdC1uYXRpdmUtc2FmZS1hcmVhLWNvbnRleHQnO1xuaW1wb3J0IHtcbiAgaXNTZWFyY2hCYXJBdmFpbGFibGVGb3JDdXJyZW50UGxhdGZvcm0sXG4gIFNjcmVlblN0YWNrSGVhZGVyQmFja0J1dHRvbkltYWdlLFxuICBTY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXcsXG4gIFNjcmVlblN0YWNrSGVhZGVyQ29uZmlnLFxuICBTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3LFxuICBTY3JlZW5TdGFja0hlYWRlclJpZ2h0VmlldyxcbiAgU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3LFxuICBTZWFyY2hCYXIsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZS1zY3JlZW5zJztcblxuaW1wb3J0IHR5cGUgeyBOYXRpdmVTdGFja05hdmlnYXRpb25PcHRpb25zIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgcHJvY2Vzc0ZvbnRzIH0gZnJvbSAnLi9Gb250UHJvY2Vzc29yJztcblxudHlwZSBQcm9wcyA9IE5hdGl2ZVN0YWNrTmF2aWdhdGlvbk9wdGlvbnMgJiB7XG4gIGhlYWRlckhlaWdodDogbnVtYmVyO1xuICByb3V0ZTogUm91dGU8c3RyaW5nPjtcbiAgY2FuR29CYWNrOiBib29sZWFuO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSGVhZGVyQ29uZmlnKHtcbiAgaGVhZGVySGVpZ2h0LFxuICBoZWFkZXJCYWNrSW1hZ2VTb3VyY2UsXG4gIGhlYWRlckJhY2tCdXR0b25NZW51RW5hYmxlZCxcbiAgaGVhZGVyQmFja1RpdGxlLFxuICBoZWFkZXJCYWNrVGl0bGVTdHlsZSxcbiAgaGVhZGVyQmFja1RpdGxlVmlzaWJsZSA9IHRydWUsXG4gIGhlYWRlckJhY2tWaXNpYmxlLFxuICBoZWFkZXJTaGFkb3dWaXNpYmxlLFxuICBoZWFkZXJMYXJnZVN0eWxlLFxuICBoZWFkZXJMYXJnZVRpdGxlLFxuICBoZWFkZXJMYXJnZVRpdGxlU2hhZG93VmlzaWJsZSxcbiAgaGVhZGVyTGFyZ2VUaXRsZVN0eWxlLFxuICBoZWFkZXJCYWNrZ3JvdW5kLFxuICBoZWFkZXJMZWZ0LFxuICBoZWFkZXJSaWdodCxcbiAgaGVhZGVyU2hvd24sXG4gIGhlYWRlclN0eWxlLFxuICBoZWFkZXJCbHVyRWZmZWN0LFxuICBoZWFkZXJUaW50Q29sb3IsXG4gIGhlYWRlclRpdGxlLFxuICBoZWFkZXJUaXRsZUFsaWduLFxuICBoZWFkZXJUaXRsZVN0eWxlLFxuICBoZWFkZXJUcmFuc3BhcmVudCxcbiAgaGVhZGVyU2VhcmNoQmFyT3B0aW9ucyxcbiAgcm91dGUsXG4gIHRpdGxlLFxuICBjYW5Hb0JhY2ssXG59OiBQcm9wcyk6IEpTWC5FbGVtZW50IHtcbiAgY29uc3QgaW5zZXRzID0gdXNlU2FmZUFyZWFJbnNldHMoKTtcblxuICBjb25zdCB7IGNvbG9ycyB9ID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgdGludENvbG9yID1cbiAgICBoZWFkZXJUaW50Q29sb3IgPz8gKFBsYXRmb3JtLk9TID09PSAnaW9zJyA/IGNvbG9ycy5wcmltYXJ5IDogY29sb3JzLnRleHQpO1xuXG4gIGNvbnN0IGhlYWRlckJhY2tUaXRsZVN0eWxlRmxhdHRlbmVkID1cbiAgICBTdHlsZVNoZWV0LmZsYXR0ZW4oaGVhZGVyQmFja1RpdGxlU3R5bGUpIHx8IHt9O1xuICBjb25zdCBoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQgPVxuICAgIFN0eWxlU2hlZXQuZmxhdHRlbihoZWFkZXJMYXJnZVRpdGxlU3R5bGUpIHx8IHt9O1xuICBjb25zdCBoZWFkZXJUaXRsZVN0eWxlRmxhdHRlbmVkID0gU3R5bGVTaGVldC5mbGF0dGVuKGhlYWRlclRpdGxlU3R5bGUpIHx8IHt9O1xuICBjb25zdCBoZWFkZXJTdHlsZUZsYXR0ZW5lZCA9IFN0eWxlU2hlZXQuZmxhdHRlbihoZWFkZXJTdHlsZSkgfHwge307XG4gIGNvbnN0IGhlYWRlckxhcmdlU3R5bGVGbGF0dGVuZWQgPSBTdHlsZVNoZWV0LmZsYXR0ZW4oaGVhZGVyTGFyZ2VTdHlsZSkgfHwge307XG5cbiAgY29uc3QgW2JhY2tUaXRsZUZvbnRGYW1pbHksIGxhcmdlVGl0bGVGb250RmFtaWx5LCB0aXRsZUZvbnRGYW1pbHldID1cbiAgICBwcm9jZXNzRm9udHMoW1xuICAgICAgaGVhZGVyQmFja1RpdGxlU3R5bGVGbGF0dGVuZWQuZm9udEZhbWlseSxcbiAgICAgIGhlYWRlckxhcmdlVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250RmFtaWx5LFxuICAgICAgaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250RmFtaWx5LFxuICAgIF0pO1xuXG4gIGNvbnN0IHRpdGxlVGV4dCA9IGdldEhlYWRlclRpdGxlKHsgdGl0bGUsIGhlYWRlclRpdGxlIH0sIHJvdXRlLm5hbWUpO1xuICBjb25zdCB0aXRsZUNvbG9yID1cbiAgICBoZWFkZXJUaXRsZVN0eWxlRmxhdHRlbmVkLmNvbG9yID8/IGhlYWRlclRpbnRDb2xvciA/PyBjb2xvcnMudGV4dDtcbiAgY29uc3QgdGl0bGVGb250U2l6ZSA9IGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFNpemU7XG4gIGNvbnN0IHRpdGxlRm9udFdlaWdodCA9IGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFdlaWdodDtcblxuICBjb25zdCBoZWFkZXJUaXRsZVN0eWxlU3VwcG9ydGVkOiBUZXh0U3R5bGUgPSB7IGNvbG9yOiB0aXRsZUNvbG9yIH07XG5cbiAgaWYgKGhlYWRlclRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udEZhbWlseSAhPSBudWxsKSB7XG4gICAgaGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZC5mb250RmFtaWx5ID0gaGVhZGVyVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250RmFtaWx5O1xuICB9XG5cbiAgaWYgKHRpdGxlRm9udFNpemUgIT0gbnVsbCkge1xuICAgIGhlYWRlclRpdGxlU3R5bGVTdXBwb3J0ZWQuZm9udFNpemUgPSB0aXRsZUZvbnRTaXplO1xuICB9XG5cbiAgaWYgKHRpdGxlRm9udFdlaWdodCAhPSBudWxsKSB7XG4gICAgaGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZC5mb250V2VpZ2h0ID0gdGl0bGVGb250V2VpZ2h0O1xuICB9XG5cbiAgY29uc3QgaGVhZGVyTGVmdEVsZW1lbnQgPSBoZWFkZXJMZWZ0Py4oe1xuICAgIHRpbnRDb2xvcixcbiAgICBjYW5Hb0JhY2ssXG4gICAgbGFiZWw6IGhlYWRlckJhY2tUaXRsZSxcbiAgfSk7XG4gIGNvbnN0IGhlYWRlclJpZ2h0RWxlbWVudCA9IGhlYWRlclJpZ2h0Py4oe1xuICAgIHRpbnRDb2xvcixcbiAgICBjYW5Hb0JhY2ssXG4gIH0pO1xuICBjb25zdCBoZWFkZXJUaXRsZUVsZW1lbnQgPVxuICAgIHR5cGVvZiBoZWFkZXJUaXRsZSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyBoZWFkZXJUaXRsZSh7XG4gICAgICAgICAgdGludENvbG9yLFxuICAgICAgICAgIGNoaWxkcmVuOiB0aXRsZVRleHQsXG4gICAgICAgIH0pXG4gICAgICA6IG51bGw7XG5cbiAgY29uc3Qgc3VwcG9ydHNIZWFkZXJTZWFyY2hCYXIgPVxuICAgIHR5cGVvZiBpc1NlYXJjaEJhckF2YWlsYWJsZUZvckN1cnJlbnRQbGF0Zm9ybSA9PT0gJ2Jvb2xlYW4nXG4gICAgICA/IGlzU2VhcmNoQmFyQXZhaWxhYmxlRm9yQ3VycmVudFBsYXRmb3JtXG4gICAgICA6IC8vIEZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9ucyBvZiByZWFjdC1uYXRpdmUtc2NyZWVuc1xuICAgICAgICBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgJiYgU2VhcmNoQmFyICE9IG51bGw7XG5cbiAgY29uc3QgaGFzSGVhZGVyU2VhcmNoQmFyID1cbiAgICBzdXBwb3J0c0hlYWRlclNlYXJjaEJhciAmJiBoZWFkZXJTZWFyY2hCYXJPcHRpb25zICE9IG51bGw7XG5cbiAgaWYgKGhlYWRlclNlYXJjaEJhck9wdGlvbnMgIT0gbnVsbCAmJiAhc3VwcG9ydHNIZWFkZXJTZWFyY2hCYXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiAncmVhY3QtbmF0aXZlLXNjcmVlbnMnIGRvZXNuJ3Qgc3VwcG9ydCBTZWFyY2hCYXIgaW4gdGhlIGhlYWRlci4gUGxlYXNlIHVwZGF0ZSB0byB0aGUgbGF0ZXN0IHZlcnNpb24gdG8gdXNlIHRoaXMgb3B0aW9uLmBcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFdlIG5lZWQgdG8gc2V0IHRoaXMgaW4gaWY6XG4gICAqIC0gQmFjayBidXR0b24gc2hvdWxkIHN0YXkgdmlzaWJsZSB3aGVuIGBoZWFkZXJMZWZ0YCBpcyBzcGVjaWZpZWRcbiAgICogLSBJZiBgaGVhZGVyVGl0bGVgIGZvciBBbmRyb2lkIGlzIHNwZWNpZmllZCwgc28gd2Ugb25seSBuZWVkIHRvIHJlbW92ZSB0aGUgdGl0bGUgYW5kIGtlZXAgdGhlIGJhY2sgYnV0dG9uXG4gICAqL1xuICBjb25zdCBiYWNrQnV0dG9uSW5DdXN0b21WaWV3ID0gaGVhZGVyQmFja1Zpc2libGVcbiAgICA/IGhlYWRlckxlZnRFbGVtZW50ICE9IG51bGxcbiAgICA6IFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcgJiYgaGVhZGVyVGl0bGVFbGVtZW50ICE9IG51bGw7XG5cbiAgY29uc3QgdHJhbnNsdWNlbnQgPVxuICAgIGhlYWRlckJhY2tncm91bmQgIT0gbnVsbCB8fFxuICAgIGhlYWRlclRyYW5zcGFyZW50IHx8XG4gICAgLy8gV2hlbiB1c2luZyBhIFNlYXJjaEJhciBvciBsYXJnZSB0aXRsZSwgdGhlIGhlYWRlciBuZWVkcyB0byBiZSB0cmFuc2x1Y2VudCBmb3IgaXQgdG8gd29yayBvbiBpT1NcbiAgICAoKGhhc0hlYWRlclNlYXJjaEJhciB8fCBoZWFkZXJMYXJnZVRpdGxlKSAmJlxuICAgICAgUGxhdGZvcm0uT1MgPT09ICdpb3MnICYmXG4gICAgICBoZWFkZXJUcmFuc3BhcmVudCAhPT0gZmFsc2UpO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtoZWFkZXJCYWNrZ3JvdW5kICE9IG51bGwgPyAoXG4gICAgICAgIDxWaWV3XG4gICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgIHN0eWxlcy5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgaGVhZGVyVHJhbnNwYXJlbnQgPyBzdHlsZXMudHJhbnNsdWNlbnQgOiBudWxsLFxuICAgICAgICAgICAgeyBoZWlnaHQ6IGhlYWRlckhlaWdodCB9LFxuICAgICAgICAgIF19XG4gICAgICAgID5cbiAgICAgICAgICB7aGVhZGVyQmFja2dyb3VuZCgpfVxuICAgICAgICA8L1ZpZXc+XG4gICAgICApIDogbnVsbH1cbiAgICAgIDxTY3JlZW5TdGFja0hlYWRlckNvbmZpZ1xuICAgICAgICBiYWNrQnV0dG9uSW5DdXN0b21WaWV3PXtiYWNrQnV0dG9uSW5DdXN0b21WaWV3fVxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I9e1xuICAgICAgICAgIGhlYWRlclN0eWxlRmxhdHRlbmVkLmJhY2tncm91bmRDb2xvciA/P1xuICAgICAgICAgIChoZWFkZXJCYWNrZ3JvdW5kICE9IG51bGwgfHwgaGVhZGVyVHJhbnNwYXJlbnRcbiAgICAgICAgICAgID8gJ3RyYW5zcGFyZW50J1xuICAgICAgICAgICAgOiBjb2xvcnMuY2FyZClcbiAgICAgICAgfVxuICAgICAgICBiYWNrVGl0bGU9e2hlYWRlckJhY2tUaXRsZVZpc2libGUgPyBoZWFkZXJCYWNrVGl0bGUgOiAnICd9XG4gICAgICAgIGJhY2tUaXRsZUZvbnRGYW1pbHk9e2JhY2tUaXRsZUZvbnRGYW1pbHl9XG4gICAgICAgIGJhY2tUaXRsZUZvbnRTaXplPXtoZWFkZXJCYWNrVGl0bGVTdHlsZUZsYXR0ZW5lZC5mb250U2l6ZX1cbiAgICAgICAgYmx1ckVmZmVjdD17aGVhZGVyQmx1ckVmZmVjdH1cbiAgICAgICAgY29sb3I9e3RpbnRDb2xvcn1cbiAgICAgICAgZGlyZWN0aW9uPXtJMThuTWFuYWdlci5pc1JUTCA/ICdydGwnIDogJ2x0cid9XG4gICAgICAgIGRpc2FibGVCYWNrQnV0dG9uTWVudT17aGVhZGVyQmFja0J1dHRvbk1lbnVFbmFibGVkID09PSBmYWxzZX1cbiAgICAgICAgaGlkZGVuPXtoZWFkZXJTaG93biA9PT0gZmFsc2V9XG4gICAgICAgIGhpZGVCYWNrQnV0dG9uPXtoZWFkZXJCYWNrVmlzaWJsZSA9PT0gZmFsc2V9XG4gICAgICAgIGhpZGVTaGFkb3c9e1xuICAgICAgICAgIGhlYWRlclNoYWRvd1Zpc2libGUgPT09IGZhbHNlIHx8XG4gICAgICAgICAgaGVhZGVyQmFja2dyb3VuZCAhPSBudWxsIHx8XG4gICAgICAgICAgaGVhZGVyVHJhbnNwYXJlbnRcbiAgICAgICAgfVxuICAgICAgICBsYXJnZVRpdGxlPXtoZWFkZXJMYXJnZVRpdGxlfVxuICAgICAgICBsYXJnZVRpdGxlQmFja2dyb3VuZENvbG9yPXtoZWFkZXJMYXJnZVN0eWxlRmxhdHRlbmVkLmJhY2tncm91bmRDb2xvcn1cbiAgICAgICAgbGFyZ2VUaXRsZUNvbG9yPXtoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQuY29sb3J9XG4gICAgICAgIGxhcmdlVGl0bGVGb250RmFtaWx5PXtsYXJnZVRpdGxlRm9udEZhbWlseX1cbiAgICAgICAgbGFyZ2VUaXRsZUZvbnRTaXplPXtoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFNpemV9XG4gICAgICAgIGxhcmdlVGl0bGVGb250V2VpZ2h0PXtoZWFkZXJMYXJnZVRpdGxlU3R5bGVGbGF0dGVuZWQuZm9udFdlaWdodH1cbiAgICAgICAgbGFyZ2VUaXRsZUhpZGVTaGFkb3c9e2hlYWRlckxhcmdlVGl0bGVTaGFkb3dWaXNpYmxlID09PSBmYWxzZX1cbiAgICAgICAgdGl0bGU9e3RpdGxlVGV4dH1cbiAgICAgICAgdGl0bGVDb2xvcj17dGl0bGVDb2xvcn1cbiAgICAgICAgdGl0bGVGb250RmFtaWx5PXt0aXRsZUZvbnRGYW1pbHl9XG4gICAgICAgIHRpdGxlRm9udFNpemU9e3RpdGxlRm9udFNpemV9XG4gICAgICAgIHRpdGxlRm9udFdlaWdodD17dGl0bGVGb250V2VpZ2h0fVxuICAgICAgICB0b3BJbnNldEVuYWJsZWQ9e2luc2V0cy50b3AgIT09IDB9XG4gICAgICAgIHRyYW5zbHVjZW50PXtcbiAgICAgICAgICAvLyBUaGlzIGRlZmF1bHRzIHRvIGB0cnVlYCwgc28gd2UgY2FuJ3QgcGFzcyBgdW5kZWZpbmVkYFxuICAgICAgICAgIHRyYW5zbHVjZW50ID09PSB0cnVlXG4gICAgICAgIH1cbiAgICAgID5cbiAgICAgICAge1BsYXRmb3JtLk9TID09PSAnaW9zJyA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAge2hlYWRlckxlZnRFbGVtZW50ICE9IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3PlxuICAgICAgICAgICAgICAgIHtoZWFkZXJMZWZ0RWxlbWVudH1cbiAgICAgICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlckxlZnRWaWV3PlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICB7aGVhZGVyVGl0bGVFbGVtZW50ICE9IG51bGwgPyAoXG4gICAgICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXc+XG4gICAgICAgICAgICAgICAge2hlYWRlclRpdGxlRWxlbWVudH1cbiAgICAgICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXc+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAge2hlYWRlckxlZnRFbGVtZW50ICE9IG51bGwgfHwgdHlwZW9mIGhlYWRlclRpdGxlID09PSAnZnVuY3Rpb24nID8gKFxuICAgICAgICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJMZWZ0Vmlldz5cbiAgICAgICAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnJvd30+XG4gICAgICAgICAgICAgICAgICB7aGVhZGVyTGVmdEVsZW1lbnR9XG4gICAgICAgICAgICAgICAgICB7aGVhZGVyVGl0bGVBbGlnbiAhPT0gJ2NlbnRlcicgPyAoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBoZWFkZXJUaXRsZSA9PT0gJ2Z1bmN0aW9uJyA/IChcbiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJUaXRsZUVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8SGVhZGVyVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbnRDb2xvcj17dGludENvbG9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e2hlYWRlclRpdGxlU3R5bGVTdXBwb3J0ZWR9XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RpdGxlVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICA8L0hlYWRlclRpdGxlPlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJMZWZ0Vmlldz5cbiAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAge2hlYWRlclRpdGxlQWxpZ24gPT09ICdjZW50ZXInID8gKFxuICAgICAgICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJDZW50ZXJWaWV3PlxuICAgICAgICAgICAgICAgIHt0eXBlb2YgaGVhZGVyVGl0bGUgPT09ICdmdW5jdGlvbicgPyAoXG4gICAgICAgICAgICAgICAgICBoZWFkZXJUaXRsZUVsZW1lbnRcbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEhlYWRlclRpdGxlXG4gICAgICAgICAgICAgICAgICAgIHRpbnRDb2xvcj17dGludENvbG9yfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17aGVhZGVyVGl0bGVTdHlsZVN1cHBvcnRlZH1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge3RpdGxlVGV4dH1cbiAgICAgICAgICAgICAgICAgIDwvSGVhZGVyVGl0bGU+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9TY3JlZW5TdGFja0hlYWRlckNlbnRlclZpZXc+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgICAge2hlYWRlckJhY2tJbWFnZVNvdXJjZSAhPT0gdW5kZWZpbmVkID8gKFxuICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlckJhY2tCdXR0b25JbWFnZSBzb3VyY2U9e2hlYWRlckJhY2tJbWFnZVNvdXJjZX0gLz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICAgIHtoZWFkZXJSaWdodEVsZW1lbnQgIT0gbnVsbCA/IChcbiAgICAgICAgICA8U2NyZWVuU3RhY2tIZWFkZXJSaWdodFZpZXc+XG4gICAgICAgICAgICB7aGVhZGVyUmlnaHRFbGVtZW50fVxuICAgICAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJSaWdodFZpZXc+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgICB7aGFzSGVhZGVyU2VhcmNoQmFyID8gKFxuICAgICAgICAgIDxTY3JlZW5TdGFja0hlYWRlclNlYXJjaEJhclZpZXc+XG4gICAgICAgICAgICA8U2VhcmNoQmFyIHsuLi5oZWFkZXJTZWFyY2hCYXJPcHRpb25zfSAvPlxuICAgICAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJTZWFyY2hCYXJWaWV3PlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvU2NyZWVuU3RhY2tIZWFkZXJDb25maWc+XG4gICAgPC8+XG4gICk7XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgcm93OiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIHRyYW5zbHVjZW50OiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgdG9wOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgekluZGV4OiAxLFxuICB9LFxuICBiYWNrZ3JvdW5kOiB7XG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICB9LFxufSk7XG4iXX0=