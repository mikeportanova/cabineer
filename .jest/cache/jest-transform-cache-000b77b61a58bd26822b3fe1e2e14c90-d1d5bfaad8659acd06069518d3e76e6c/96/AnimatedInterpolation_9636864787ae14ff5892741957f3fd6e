6e850ee7c6ef2a64fe03797b76c3e33a
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AnimatedNode = require("./AnimatedNode");

var AnimatedWithChildren = require("./AnimatedWithChildren");

var NativeAnimatedHelper = require("../NativeAnimatedHelper");

var invariant = require('invariant');

var normalizeColor = require("../../StyleSheet/normalizeColor");

var linear = function linear(t) {
  return t;
};

function createInterpolation(config) {
  if (config.outputRange && typeof config.outputRange[0] === 'string') {
    return createInterpolationFromStringOutputRange(config);
  }

  var outputRange = config.outputRange;
  var inputRange = config.inputRange;

  if (__DEV__) {
    checkInfiniteRange('outputRange', outputRange);
    checkInfiniteRange('inputRange', inputRange);
    checkValidInputRange(inputRange);
    invariant(inputRange.length === outputRange.length, 'inputRange (' + inputRange.length + ') and outputRange (' + outputRange.length + ') must have the same length');
  }

  var easing = config.easing || linear;
  var extrapolateLeft = 'extend';

  if (config.extrapolateLeft !== undefined) {
    extrapolateLeft = config.extrapolateLeft;
  } else if (config.extrapolate !== undefined) {
    extrapolateLeft = config.extrapolate;
  }

  var extrapolateRight = 'extend';

  if (config.extrapolateRight !== undefined) {
    extrapolateRight = config.extrapolateRight;
  } else if (config.extrapolate !== undefined) {
    extrapolateRight = config.extrapolate;
  }

  return function (input) {
    invariant(typeof input === 'number', 'Cannot interpolation an input which is not a number');
    var range = findRange(input, inputRange);
    return interpolate(input, inputRange[range], inputRange[range + 1], outputRange[range], outputRange[range + 1], easing, extrapolateLeft, extrapolateRight);
  };
}

function interpolate(input, inputMin, inputMax, outputMin, outputMax, easing, extrapolateLeft, extrapolateRight) {
  var result = input;

  if (result < inputMin) {
    if (extrapolateLeft === 'identity') {
      return result;
    } else if (extrapolateLeft === 'clamp') {
      result = inputMin;
    } else if (extrapolateLeft === 'extend') {}
  }

  if (result > inputMax) {
    if (extrapolateRight === 'identity') {
      return result;
    } else if (extrapolateRight === 'clamp') {
      result = inputMax;
    } else if (extrapolateRight === 'extend') {}
  }

  if (outputMin === outputMax) {
    return outputMin;
  }

  if (inputMin === inputMax) {
    if (input <= inputMin) {
      return outputMin;
    }

    return outputMax;
  }

  if (inputMin === -Infinity) {
    result = -result;
  } else if (inputMax === Infinity) {
    result = result - inputMin;
  } else {
    result = (result - inputMin) / (inputMax - inputMin);
  }

  result = easing(result);

  if (outputMin === -Infinity) {
    result = -result;
  } else if (outputMax === Infinity) {
    result = result + outputMin;
  } else {
    result = result * (outputMax - outputMin) + outputMin;
  }

  return result;
}

function colorToRgba(input) {
  var normalizedColor = normalizeColor(input);

  if (normalizedColor === null || typeof normalizedColor !== 'number') {
    return input;
  }

  normalizedColor = normalizedColor || 0;
  var r = (normalizedColor & 0xff000000) >>> 24;
  var g = (normalizedColor & 0x00ff0000) >>> 16;
  var b = (normalizedColor & 0x0000ff00) >>> 8;
  var a = (normalizedColor & 0x000000ff) / 255;
  return "rgba(" + r + ", " + g + ", " + b + ", " + a + ")";
}

var stringShapeRegex = /[+-]?(?:\d+\.?\d*|\.\d+)(?:[eE][+-]?\d+)?/g;

function createInterpolationFromStringOutputRange(config) {
  var outputRange = config.outputRange;
  invariant(outputRange.length >= 2, 'Bad output range');
  outputRange = outputRange.map(colorToRgba);
  checkPattern(outputRange);
  var outputRanges = outputRange[0].match(stringShapeRegex).map(function () {
    return [];
  });
  outputRange.forEach(function (value) {
    value.match(stringShapeRegex).forEach(function (number, i) {
      outputRanges[i].push(+number);
    });
  });
  var interpolations = outputRange[0].match(stringShapeRegex).map(function (value, i) {
    return createInterpolation(Object.assign({}, config, {
      outputRange: outputRanges[i]
    }));
  });
  var shouldRound = isRgbOrRgba(outputRange[0]);
  return function (input) {
    var i = 0;
    return outputRange[0].replace(stringShapeRegex, function () {
      var val = +interpolations[i++](input);

      if (shouldRound) {
        val = i < 4 ? Math.round(val) : Math.round(val * 1000) / 1000;
      }

      return String(val);
    });
  };
}

function isRgbOrRgba(range) {
  return typeof range === 'string' && range.startsWith('rgb');
}

function checkPattern(arr) {
  var pattern = arr[0].replace(stringShapeRegex, '');

  for (var i = 1; i < arr.length; ++i) {
    invariant(pattern === arr[i].replace(stringShapeRegex, ''), 'invalid pattern ' + arr[0] + ' and ' + arr[i]);
  }
}

function findRange(input, inputRange) {
  var i;

  for (i = 1; i < inputRange.length - 1; ++i) {
    if (inputRange[i] >= input) {
      break;
    }
  }

  return i - 1;
}

function checkValidInputRange(arr) {
  invariant(arr.length >= 2, 'inputRange must have at least 2 elements');
  var message = 'inputRange must be monotonically non-decreasing ' + String(arr);

  for (var i = 1; i < arr.length; ++i) {
    invariant(arr[i] >= arr[i - 1], message);
  }
}

function checkInfiniteRange(name, arr) {
  invariant(arr.length >= 2, name + ' must have at least 2 elements');
  invariant(arr.length !== 2 || arr[0] !== -Infinity || arr[1] !== Infinity, name + 'cannot be ]-infinity;+infinity[ ' + arr);
}

var AnimatedInterpolation = function (_AnimatedWithChildren) {
  (0, _inherits2.default)(AnimatedInterpolation, _AnimatedWithChildren);

  var _super = _createSuper(AnimatedInterpolation);

  function AnimatedInterpolation(parent, config) {
    var _this;

    (0, _classCallCheck2.default)(this, AnimatedInterpolation);
    _this = _super.call(this);
    _this._parent = parent;
    _this._config = config;
    _this._interpolation = createInterpolation(config);
    return _this;
  }

  (0, _createClass2.default)(AnimatedInterpolation, [{
    key: "__makeNative",
    value: function __makeNative(platformConfig) {
      this._parent.__makeNative(platformConfig);

      (0, _get2.default)((0, _getPrototypeOf2.default)(AnimatedInterpolation.prototype), "__makeNative", this).call(this, platformConfig);
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      var parentValue = this._parent.__getValue();

      invariant(typeof parentValue === 'number', 'Cannot interpolate an input which is not a number.');
      return this._interpolation(parentValue);
    }
  }, {
    key: "interpolate",
    value: function interpolate(config) {
      return new AnimatedInterpolation(this, config);
    }
  }, {
    key: "__attach",
    value: function __attach() {
      this._parent.__addChild(this);
    }
  }, {
    key: "__detach",
    value: function __detach() {
      this._parent.__removeChild(this);

      (0, _get2.default)((0, _getPrototypeOf2.default)(AnimatedInterpolation.prototype), "__detach", this).call(this);
    }
  }, {
    key: "__transformDataType",
    value: function __transformDataType(range) {
      return range.map(NativeAnimatedHelper.transformDataType);
    }
  }, {
    key: "__getNativeConfig",
    value: function __getNativeConfig() {
      if (__DEV__) {
        NativeAnimatedHelper.validateInterpolation(this._config);
      }

      return {
        inputRange: this._config.inputRange,
        outputRange: this.__transformDataType(this._config.outputRange),
        extrapolateLeft: this._config.extrapolateLeft || this._config.extrapolate || 'extend',
        extrapolateRight: this._config.extrapolateRight || this._config.extrapolate || 'extend',
        type: 'interpolation'
      };
    }
  }]);
  return AnimatedInterpolation;
}(AnimatedWithChildren);

AnimatedInterpolation.__createInterpolation = createInterpolation;
module.exports = AnimatedInterpolation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbmltYXRlZE5vZGUiLCJyZXF1aXJlIiwiQW5pbWF0ZWRXaXRoQ2hpbGRyZW4iLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsImludmFyaWFudCIsIm5vcm1hbGl6ZUNvbG9yIiwibGluZWFyIiwidCIsImNyZWF0ZUludGVycG9sYXRpb24iLCJjb25maWciLCJvdXRwdXRSYW5nZSIsImNyZWF0ZUludGVycG9sYXRpb25Gcm9tU3RyaW5nT3V0cHV0UmFuZ2UiLCJpbnB1dFJhbmdlIiwiX19ERVZfXyIsImNoZWNrSW5maW5pdGVSYW5nZSIsImNoZWNrVmFsaWRJbnB1dFJhbmdlIiwibGVuZ3RoIiwiZWFzaW5nIiwiZXh0cmFwb2xhdGVMZWZ0IiwidW5kZWZpbmVkIiwiZXh0cmFwb2xhdGUiLCJleHRyYXBvbGF0ZVJpZ2h0IiwiaW5wdXQiLCJyYW5nZSIsImZpbmRSYW5nZSIsImludGVycG9sYXRlIiwiaW5wdXRNaW4iLCJpbnB1dE1heCIsIm91dHB1dE1pbiIsIm91dHB1dE1heCIsInJlc3VsdCIsIkluZmluaXR5IiwiY29sb3JUb1JnYmEiLCJub3JtYWxpemVkQ29sb3IiLCJyIiwiZyIsImIiLCJhIiwic3RyaW5nU2hhcGVSZWdleCIsIm1hcCIsImNoZWNrUGF0dGVybiIsIm91dHB1dFJhbmdlcyIsIm1hdGNoIiwiZm9yRWFjaCIsInZhbHVlIiwibnVtYmVyIiwiaSIsInB1c2giLCJpbnRlcnBvbGF0aW9ucyIsInNob3VsZFJvdW5kIiwiaXNSZ2JPclJnYmEiLCJyZXBsYWNlIiwidmFsIiwiTWF0aCIsInJvdW5kIiwiU3RyaW5nIiwic3RhcnRzV2l0aCIsImFyciIsInBhdHRlcm4iLCJtZXNzYWdlIiwibmFtZSIsIkFuaW1hdGVkSW50ZXJwb2xhdGlvbiIsInBhcmVudCIsIl9wYXJlbnQiLCJfY29uZmlnIiwiX2ludGVycG9sYXRpb24iLCJwbGF0Zm9ybUNvbmZpZyIsIl9fbWFrZU5hdGl2ZSIsInBhcmVudFZhbHVlIiwiX19nZXRWYWx1ZSIsIl9fYWRkQ2hpbGQiLCJfX3JlbW92ZUNoaWxkIiwidHJhbnNmb3JtRGF0YVR5cGUiLCJ2YWxpZGF0ZUludGVycG9sYXRpb24iLCJfX3RyYW5zZm9ybURhdGFUeXBlIiwidHlwZSIsIl9fY3JlYXRlSW50ZXJwb2xhdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJBbmltYXRlZEludGVycG9sYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuLyogZXNsaW50IG5vLWJpdHdpc2U6IDAgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBBbmltYXRlZE5vZGUgPSByZXF1aXJlKCcuL0FuaW1hdGVkTm9kZScpO1xuY29uc3QgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4gPSByZXF1aXJlKCcuL0FuaW1hdGVkV2l0aENoaWxkcmVuJyk7XG5jb25zdCBOYXRpdmVBbmltYXRlZEhlbHBlciA9IHJlcXVpcmUoJy4uL05hdGl2ZUFuaW1hdGVkSGVscGVyJyk7XG5cbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuY29uc3Qgbm9ybWFsaXplQ29sb3IgPSByZXF1aXJlKCcuLi8uLi9TdHlsZVNoZWV0L25vcm1hbGl6ZUNvbG9yJyk7XG5cbmltcG9ydCB0eXBlIHtQbGF0Zm9ybUNvbmZpZ30gZnJvbSAnLi4vQW5pbWF0ZWRQbGF0Zm9ybUNvbmZpZyc7XG5cbnR5cGUgRXh0cmFwb2xhdGVUeXBlID0gJ2V4dGVuZCcgfCAnaWRlbnRpdHknIHwgJ2NsYW1wJztcblxuZXhwb3J0IHR5cGUgSW50ZXJwb2xhdGlvbkNvbmZpZ1R5cGUgPSAkUmVhZE9ubHk8e1xuICBpbnB1dFJhbmdlOiAkUmVhZE9ubHlBcnJheTxudW1iZXI+LFxuICBvdXRwdXRSYW5nZTogJFJlYWRPbmx5QXJyYXk8bnVtYmVyPiB8ICRSZWFkT25seUFycmF5PHN0cmluZz4sXG4gIGVhc2luZz86IChpbnB1dDogbnVtYmVyKSA9PiBudW1iZXIsXG4gIGV4dHJhcG9sYXRlPzogRXh0cmFwb2xhdGVUeXBlLFxuICBleHRyYXBvbGF0ZUxlZnQ/OiBFeHRyYXBvbGF0ZVR5cGUsXG4gIGV4dHJhcG9sYXRlUmlnaHQ/OiBFeHRyYXBvbGF0ZVR5cGUsXG59PjtcblxuY29uc3QgbGluZWFyID0gKHQ6IG51bWJlcikgPT4gdDtcblxuLyoqXG4gKiBWZXJ5IGhhbmR5IGhlbHBlciB0byBtYXAgaW5wdXQgcmFuZ2VzIHRvIG91dHB1dCByYW5nZXMgd2l0aCBhbiBlYXNpbmdcbiAqIGZ1bmN0aW9uIGFuZCBjdXN0b20gYmVoYXZpb3Igb3V0c2lkZSBvZiB0aGUgcmFuZ2VzLlxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnRlcnBvbGF0aW9uKFxuICBjb25maWc6IEludGVycG9sYXRpb25Db25maWdUeXBlLFxuKTogKGlucHV0OiBudW1iZXIpID0+IG51bWJlciB8IHN0cmluZyB7XG4gIGlmIChjb25maWcub3V0cHV0UmFuZ2UgJiYgdHlwZW9mIGNvbmZpZy5vdXRwdXRSYW5nZVswXSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gY3JlYXRlSW50ZXJwb2xhdGlvbkZyb21TdHJpbmdPdXRwdXRSYW5nZShjb25maWcpO1xuICB9XG5cbiAgY29uc3Qgb3V0cHV0UmFuZ2U6IEFycmF5PG51bWJlcj4gPSAoY29uZmlnLm91dHB1dFJhbmdlOiBhbnkpO1xuXG4gIGNvbnN0IGlucHV0UmFuZ2UgPSBjb25maWcuaW5wdXRSYW5nZTtcblxuICBpZiAoX19ERVZfXykge1xuICAgIGNoZWNrSW5maW5pdGVSYW5nZSgnb3V0cHV0UmFuZ2UnLCBvdXRwdXRSYW5nZSk7XG4gICAgY2hlY2tJbmZpbml0ZVJhbmdlKCdpbnB1dFJhbmdlJywgaW5wdXRSYW5nZSk7XG4gICAgY2hlY2tWYWxpZElucHV0UmFuZ2UoaW5wdXRSYW5nZSk7XG5cbiAgICBpbnZhcmlhbnQoXG4gICAgICBpbnB1dFJhbmdlLmxlbmd0aCA9PT0gb3V0cHV0UmFuZ2UubGVuZ3RoLFxuICAgICAgJ2lucHV0UmFuZ2UgKCcgK1xuICAgICAgICBpbnB1dFJhbmdlLmxlbmd0aCArXG4gICAgICAgICcpIGFuZCBvdXRwdXRSYW5nZSAoJyArXG4gICAgICAgIG91dHB1dFJhbmdlLmxlbmd0aCArXG4gICAgICAgICcpIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGgnLFxuICAgICk7XG4gIH1cblxuICBjb25zdCBlYXNpbmcgPSBjb25maWcuZWFzaW5nIHx8IGxpbmVhcjtcblxuICBsZXQgZXh0cmFwb2xhdGVMZWZ0OiBFeHRyYXBvbGF0ZVR5cGUgPSAnZXh0ZW5kJztcbiAgaWYgKGNvbmZpZy5leHRyYXBvbGF0ZUxlZnQgIT09IHVuZGVmaW5lZCkge1xuICAgIGV4dHJhcG9sYXRlTGVmdCA9IGNvbmZpZy5leHRyYXBvbGF0ZUxlZnQ7XG4gIH0gZWxzZSBpZiAoY29uZmlnLmV4dHJhcG9sYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICBleHRyYXBvbGF0ZUxlZnQgPSBjb25maWcuZXh0cmFwb2xhdGU7XG4gIH1cblxuICBsZXQgZXh0cmFwb2xhdGVSaWdodDogRXh0cmFwb2xhdGVUeXBlID0gJ2V4dGVuZCc7XG4gIGlmIChjb25maWcuZXh0cmFwb2xhdGVSaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZXh0cmFwb2xhdGVSaWdodCA9IGNvbmZpZy5leHRyYXBvbGF0ZVJpZ2h0O1xuICB9IGVsc2UgaWYgKGNvbmZpZy5leHRyYXBvbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZXh0cmFwb2xhdGVSaWdodCA9IGNvbmZpZy5leHRyYXBvbGF0ZTtcbiAgfVxuXG4gIHJldHVybiBpbnB1dCA9PiB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyxcbiAgICAgICdDYW5ub3QgaW50ZXJwb2xhdGlvbiBhbiBpbnB1dCB3aGljaCBpcyBub3QgYSBudW1iZXInLFxuICAgICk7XG5cbiAgICBjb25zdCByYW5nZSA9IGZpbmRSYW5nZShpbnB1dCwgaW5wdXRSYW5nZSk7XG4gICAgcmV0dXJuIGludGVycG9sYXRlKFxuICAgICAgaW5wdXQsXG4gICAgICBpbnB1dFJhbmdlW3JhbmdlXSxcbiAgICAgIGlucHV0UmFuZ2VbcmFuZ2UgKyAxXSxcbiAgICAgIG91dHB1dFJhbmdlW3JhbmdlXSxcbiAgICAgIG91dHB1dFJhbmdlW3JhbmdlICsgMV0sXG4gICAgICBlYXNpbmcsXG4gICAgICBleHRyYXBvbGF0ZUxlZnQsXG4gICAgICBleHRyYXBvbGF0ZVJpZ2h0LFxuICAgICk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlKFxuICBpbnB1dDogbnVtYmVyLFxuICBpbnB1dE1pbjogbnVtYmVyLFxuICBpbnB1dE1heDogbnVtYmVyLFxuICBvdXRwdXRNaW46IG51bWJlcixcbiAgb3V0cHV0TWF4OiBudW1iZXIsXG4gIGVhc2luZzogKGlucHV0OiBudW1iZXIpID0+IG51bWJlcixcbiAgZXh0cmFwb2xhdGVMZWZ0OiBFeHRyYXBvbGF0ZVR5cGUsXG4gIGV4dHJhcG9sYXRlUmlnaHQ6IEV4dHJhcG9sYXRlVHlwZSxcbikge1xuICBsZXQgcmVzdWx0ID0gaW5wdXQ7XG5cbiAgLy8gRXh0cmFwb2xhdGVcbiAgaWYgKHJlc3VsdCA8IGlucHV0TWluKSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlTGVmdCA9PT0gJ2lkZW50aXR5Jykge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2UgaWYgKGV4dHJhcG9sYXRlTGVmdCA9PT0gJ2NsYW1wJykge1xuICAgICAgcmVzdWx0ID0gaW5wdXRNaW47XG4gICAgfSBlbHNlIGlmIChleHRyYXBvbGF0ZUxlZnQgPT09ICdleHRlbmQnKSB7XG4gICAgICAvLyBub29wXG4gICAgfVxuICB9XG5cbiAgaWYgKHJlc3VsdCA+IGlucHV0TWF4KSB7XG4gICAgaWYgKGV4dHJhcG9sYXRlUmlnaHQgPT09ICdpZGVudGl0eScpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIGlmIChleHRyYXBvbGF0ZVJpZ2h0ID09PSAnY2xhbXAnKSB7XG4gICAgICByZXN1bHQgPSBpbnB1dE1heDtcbiAgICB9IGVsc2UgaWYgKGV4dHJhcG9sYXRlUmlnaHQgPT09ICdleHRlbmQnKSB7XG4gICAgICAvLyBub29wXG4gICAgfVxuICB9XG5cbiAgaWYgKG91dHB1dE1pbiA9PT0gb3V0cHV0TWF4KSB7XG4gICAgcmV0dXJuIG91dHB1dE1pbjtcbiAgfVxuXG4gIGlmIChpbnB1dE1pbiA9PT0gaW5wdXRNYXgpIHtcbiAgICBpZiAoaW5wdXQgPD0gaW5wdXRNaW4pIHtcbiAgICAgIHJldHVybiBvdXRwdXRNaW47XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRNYXg7XG4gIH1cblxuICAvLyBJbnB1dCBSYW5nZVxuICBpZiAoaW5wdXRNaW4gPT09IC1JbmZpbml0eSkge1xuICAgIHJlc3VsdCA9IC1yZXN1bHQ7XG4gIH0gZWxzZSBpZiAoaW5wdXRNYXggPT09IEluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0IC0gaW5wdXRNaW47XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHJlc3VsdCAtIGlucHV0TWluKSAvIChpbnB1dE1heCAtIGlucHV0TWluKTtcbiAgfVxuXG4gIC8vIEVhc2luZ1xuICByZXN1bHQgPSBlYXNpbmcocmVzdWx0KTtcblxuICAvLyBPdXRwdXQgUmFuZ2VcbiAgaWYgKG91dHB1dE1pbiA9PT0gLUluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gLXJlc3VsdDtcbiAgfSBlbHNlIGlmIChvdXRwdXRNYXggPT09IEluZmluaXR5KSB7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICsgb3V0cHV0TWluO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9IHJlc3VsdCAqIChvdXRwdXRNYXggLSBvdXRwdXRNaW4pICsgb3V0cHV0TWluO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gY29sb3JUb1JnYmEoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBub3JtYWxpemVkQ29sb3IgPSBub3JtYWxpemVDb2xvcihpbnB1dCk7XG4gIGlmIChub3JtYWxpemVkQ29sb3IgPT09IG51bGwgfHwgdHlwZW9mIG5vcm1hbGl6ZWRDb2xvciAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH1cblxuICBub3JtYWxpemVkQ29sb3IgPSBub3JtYWxpemVkQ29sb3IgfHwgMDtcblxuICBjb25zdCByID0gKG5vcm1hbGl6ZWRDb2xvciAmIDB4ZmYwMDAwMDApID4+PiAyNDtcbiAgY29uc3QgZyA9IChub3JtYWxpemVkQ29sb3IgJiAweDAwZmYwMDAwKSA+Pj4gMTY7XG4gIGNvbnN0IGIgPSAobm9ybWFsaXplZENvbG9yICYgMHgwMDAwZmYwMCkgPj4+IDg7XG4gIGNvbnN0IGEgPSAobm9ybWFsaXplZENvbG9yICYgMHgwMDAwMDBmZikgLyAyNTU7XG5cbiAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YX0pYDtcbn1cblxuY29uc3Qgc3RyaW5nU2hhcGVSZWdleCA9IC9bKy1dPyg/OlxcZCtcXC4/XFxkKnxcXC5cXGQrKSg/OltlRV1bKy1dP1xcZCspPy9nO1xuXG4vKipcbiAqIFN1cHBvcnRzIHN0cmluZyBzaGFwZXMgYnkgZXh0cmFjdGluZyBudW1iZXJzIHNvIG5ldyB2YWx1ZXMgY2FuIGJlIGNvbXB1dGVkLFxuICogYW5kIHJlY29tYmluZXMgdGhvc2UgdmFsdWVzIGludG8gbmV3IHN0cmluZ3Mgb2YgdGhlIHNhbWUgc2hhcGUuICBTdXBwb3J0c1xuICogdGhpbmdzIGxpa2U6XG4gKlxuICogICByZ2JhKDEyMywgNDIsIDk5LCAwLjM2KSAvLyBjb2xvcnNcbiAqICAgLTQ1ZGVnICAgICAgICAgICAgICAgICAgLy8gdmFsdWVzIHdpdGggdW5pdHNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW50ZXJwb2xhdGlvbkZyb21TdHJpbmdPdXRwdXRSYW5nZShcbiAgY29uZmlnOiBJbnRlcnBvbGF0aW9uQ29uZmlnVHlwZSxcbik6IChpbnB1dDogbnVtYmVyKSA9PiBzdHJpbmcge1xuICBsZXQgb3V0cHV0UmFuZ2U6IEFycmF5PHN0cmluZz4gPSAoY29uZmlnLm91dHB1dFJhbmdlOiBhbnkpO1xuICBpbnZhcmlhbnQob3V0cHV0UmFuZ2UubGVuZ3RoID49IDIsICdCYWQgb3V0cHV0IHJhbmdlJyk7XG4gIG91dHB1dFJhbmdlID0gb3V0cHV0UmFuZ2UubWFwKGNvbG9yVG9SZ2JhKTtcbiAgY2hlY2tQYXR0ZXJuKG91dHB1dFJhbmdlKTtcblxuICAvLyBbJ3JnYmEoMCwgMTAwLCAyMDAsIDApJywgJ3JnYmEoNTAsIDE1MCwgMjUwLCAwLjUpJ11cbiAgLy8gLT5cbiAgLy8gW1xuICAvLyAgIFswLCA1MF0sXG4gIC8vICAgWzEwMCwgMTUwXSxcbiAgLy8gICBbMjAwLCAyNTBdLFxuICAvLyAgIFswLCAwLjVdLFxuICAvLyBdXG4gIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV0gKD49MC4xOC4wKTogYG91dHB1dFJhbmdlWzBdLm1hdGNoKClgIGNhblxuICAgKiByZXR1cm4gYG51bGxgLiBOZWVkIHRvIGd1YXJkIGFnYWluc3QgdGhpcyBwb3NzaWJpbGl0eS4gKi9cbiAgY29uc3Qgb3V0cHV0UmFuZ2VzID0gb3V0cHV0UmFuZ2VbMF0ubWF0Y2goc3RyaW5nU2hhcGVSZWdleCkubWFwKCgpID0+IFtdKTtcbiAgb3V0cHV0UmFuZ2UuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgLyogJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdXNlXSAoPj0wLjE4LjApOiBgdmFsdWUubWF0Y2goKWAgY2FuIHJldHVyblxuICAgICAqIGBudWxsYC4gTmVlZCB0byBndWFyZCBhZ2FpbnN0IHRoaXMgcG9zc2liaWxpdHkuICovXG4gICAgdmFsdWUubWF0Y2goc3RyaW5nU2hhcGVSZWdleCkuZm9yRWFjaCgobnVtYmVyLCBpKSA9PiB7XG4gICAgICBvdXRwdXRSYW5nZXNbaV0ucHVzaCgrbnVtYmVyKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgY29uc3QgaW50ZXJwb2xhdGlvbnMgPSBvdXRwdXRSYW5nZVswXVxuICAgIC5tYXRjaChzdHJpbmdTaGFwZVJlZ2V4KVxuICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV0gKD49MC4xOC4wKTogYG91dHB1dFJhbmdlWzBdLm1hdGNoKClgIGNhblxuICAgICAqIHJldHVybiBgbnVsbGAuIE5lZWQgdG8gZ3VhcmQgYWdhaW5zdCB0aGlzIHBvc3NpYmlsaXR5LiAqL1xuICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdICg+PTAuMTguMCk6IGBvdXRwdXRSYW5nZVswXS5tYXRjaCgpYCBjYW5cbiAgICAgKiByZXR1cm4gYG51bGxgLiBOZWVkIHRvIGd1YXJkIGFnYWluc3QgdGhpcyBwb3NzaWJpbGl0eS4gKi9cbiAgICAubWFwKCh2YWx1ZSwgaSkgPT4ge1xuICAgICAgcmV0dXJuIGNyZWF0ZUludGVycG9sYXRpb24oe1xuICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIG91dHB1dFJhbmdlOiBvdXRwdXRSYW5nZXNbaV0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAvLyByZ2JhIHJlcXVpcmVzIHRoYXQgdGhlIHIsZyxiIGFyZSBpbnRlZ2Vycy4uLi4gc28gd2Ugd2FudCB0byByb3VuZCB0aGVtLCBidXQgd2UgKmRvbnQqIHdhbnQgdG9cbiAgLy8gcm91bmQgdGhlIG9wYWNpdHkgKDR0aCBjb2x1bW4pLlxuICBjb25zdCBzaG91bGRSb3VuZCA9IGlzUmdiT3JSZ2JhKG91dHB1dFJhbmdlWzBdKTtcblxuICByZXR1cm4gaW5wdXQgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICAvLyAncmdiYSgwLCAxMDAsIDIwMCwgMCknXG4gICAgLy8gLT5cbiAgICAvLyAncmdiYSgke2ludGVycG9sYXRpb25zWzBdKGlucHV0KX0sICR7aW50ZXJwb2xhdGlvbnNbMV0oaW5wdXQpfSwgLi4uJ1xuICAgIHJldHVybiBvdXRwdXRSYW5nZVswXS5yZXBsYWNlKHN0cmluZ1NoYXBlUmVnZXgsICgpID0+IHtcbiAgICAgIGxldCB2YWwgPSAraW50ZXJwb2xhdGlvbnNbaSsrXShpbnB1dCk7XG4gICAgICBpZiAoc2hvdWxkUm91bmQpIHtcbiAgICAgICAgdmFsID0gaSA8IDQgPyBNYXRoLnJvdW5kKHZhbCkgOiBNYXRoLnJvdW5kKHZhbCAqIDEwMDApIC8gMTAwMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBTdHJpbmcodmFsKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNSZ2JPclJnYmEocmFuZ2U6IHN0cmluZykge1xuICByZXR1cm4gdHlwZW9mIHJhbmdlID09PSAnc3RyaW5nJyAmJiByYW5nZS5zdGFydHNXaXRoKCdyZ2InKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tQYXR0ZXJuKGFycjogJFJlYWRPbmx5QXJyYXk8c3RyaW5nPikge1xuICBjb25zdCBwYXR0ZXJuID0gYXJyWzBdLnJlcGxhY2Uoc3RyaW5nU2hhcGVSZWdleCwgJycpO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIGludmFyaWFudChcbiAgICAgIHBhdHRlcm4gPT09IGFycltpXS5yZXBsYWNlKHN0cmluZ1NoYXBlUmVnZXgsICcnKSxcbiAgICAgICdpbnZhbGlkIHBhdHRlcm4gJyArIGFyclswXSArICcgYW5kICcgKyBhcnJbaV0sXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kUmFuZ2UoaW5wdXQ6IG51bWJlciwgaW5wdXRSYW5nZTogJFJlYWRPbmx5QXJyYXk8bnVtYmVyPikge1xuICBsZXQgaTtcbiAgZm9yIChpID0gMTsgaSA8IGlucHV0UmFuZ2UubGVuZ3RoIC0gMTsgKytpKSB7XG4gICAgaWYgKGlucHV0UmFuZ2VbaV0gPj0gaW5wdXQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaSAtIDE7XG59XG5cbmZ1bmN0aW9uIGNoZWNrVmFsaWRJbnB1dFJhbmdlKGFycjogJFJlYWRPbmx5QXJyYXk8bnVtYmVyPikge1xuICBpbnZhcmlhbnQoYXJyLmxlbmd0aCA+PSAyLCAnaW5wdXRSYW5nZSBtdXN0IGhhdmUgYXQgbGVhc3QgMiBlbGVtZW50cycpO1xuICBjb25zdCBtZXNzYWdlID1cbiAgICAnaW5wdXRSYW5nZSBtdXN0IGJlIG1vbm90b25pY2FsbHkgbm9uLWRlY3JlYXNpbmcgJyArIFN0cmluZyhhcnIpO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgIGludmFyaWFudChhcnJbaV0gPj0gYXJyW2kgLSAxXSwgbWVzc2FnZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tJbmZpbml0ZVJhbmdlKG5hbWU6IHN0cmluZywgYXJyOiAkUmVhZE9ubHlBcnJheTxudW1iZXI+KSB7XG4gIGludmFyaWFudChhcnIubGVuZ3RoID49IDIsIG5hbWUgKyAnIG11c3QgaGF2ZSBhdCBsZWFzdCAyIGVsZW1lbnRzJyk7XG4gIGludmFyaWFudChcbiAgICBhcnIubGVuZ3RoICE9PSAyIHx8IGFyclswXSAhPT0gLUluZmluaXR5IHx8IGFyclsxXSAhPT0gSW5maW5pdHksXG4gICAgLyogJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV0gKD49MC4xMy4wKSAtIEluIHRoZSBhZGRpdGlvbiBleHByZXNzaW9uXG4gICAgICogYmVsb3cgdGhpcyBjb21tZW50LCBvbmUgb3IgYm90aCBvZiB0aGUgb3BlcmFuZHMgbWF5IGJlIHNvbWV0aGluZyB0aGF0XG4gICAgICogZG9lc24ndCBjbGVhbmx5IGNvbnZlcnQgdG8gYSBzdHJpbmcsIGxpa2UgdW5kZWZpbmVkLCBudWxsLCBhbmQgb2JqZWN0LFxuICAgICAqIGV0Yy4gSWYgeW91IHJlYWxseSBtZWFuIHRoaXMgaW1wbGljaXQgc3RyaW5nIGNvbnZlcnNpb24sIHlvdSBjYW4gZG9cbiAgICAgKiBzb21ldGhpbmcgbGlrZSBTdHJpbmcobXlUaGluZykgKi9cbiAgICBuYW1lICsgJ2Nhbm5vdCBiZSBdLWluZmluaXR5OytpbmZpbml0eVsgJyArIGFycixcbiAgKTtcbn1cblxuY2xhc3MgQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIGV4dGVuZHMgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ge1xuICAvLyBFeHBvcnQgZm9yIHRlc3RpbmcuXG4gIHN0YXRpYyBfX2NyZWF0ZUludGVycG9sYXRpb246IChcbiAgICBjb25maWc6IEludGVycG9sYXRpb25Db25maWdUeXBlLFxuICApID0+IChpbnB1dDogbnVtYmVyKSA9PiBudW1iZXIgfCBzdHJpbmcgPSBjcmVhdGVJbnRlcnBvbGF0aW9uO1xuXG4gIF9wYXJlbnQ6IEFuaW1hdGVkTm9kZTtcbiAgX2NvbmZpZzogSW50ZXJwb2xhdGlvbkNvbmZpZ1R5cGU7XG4gIF9pbnRlcnBvbGF0aW9uOiAoaW5wdXQ6IG51bWJlcikgPT4gbnVtYmVyIHwgc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHBhcmVudDogQW5pbWF0ZWROb2RlLCBjb25maWc6IEludGVycG9sYXRpb25Db25maWdUeXBlKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuX2ludGVycG9sYXRpb24gPSBjcmVhdGVJbnRlcnBvbGF0aW9uKGNvbmZpZyk7XG4gIH1cblxuICBfX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWc6ID9QbGF0Zm9ybUNvbmZpZykge1xuICAgIHRoaXMuX3BhcmVudC5fX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWcpO1xuICAgIHN1cGVyLl9fbWFrZU5hdGl2ZShwbGF0Zm9ybUNvbmZpZyk7XG4gIH1cblxuICBfX2dldFZhbHVlKCk6IG51bWJlciB8IHN0cmluZyB7XG4gICAgY29uc3QgcGFyZW50VmFsdWU6IG51bWJlciA9IHRoaXMuX3BhcmVudC5fX2dldFZhbHVlKCk7XG4gICAgaW52YXJpYW50KFxuICAgICAgdHlwZW9mIHBhcmVudFZhbHVlID09PSAnbnVtYmVyJyxcbiAgICAgICdDYW5ub3QgaW50ZXJwb2xhdGUgYW4gaW5wdXQgd2hpY2ggaXMgbm90IGEgbnVtYmVyLicsXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJwb2xhdGlvbihwYXJlbnRWYWx1ZSk7XG4gIH1cblxuICBpbnRlcnBvbGF0ZShjb25maWc6IEludGVycG9sYXRpb25Db25maWdUeXBlKTogQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIHtcbiAgICByZXR1cm4gbmV3IEFuaW1hdGVkSW50ZXJwb2xhdGlvbih0aGlzLCBjb25maWcpO1xuICB9XG5cbiAgX19hdHRhY2goKTogdm9pZCB7XG4gICAgdGhpcy5fcGFyZW50Ll9fYWRkQ2hpbGQodGhpcyk7XG4gIH1cblxuICBfX2RldGFjaCgpOiB2b2lkIHtcbiAgICB0aGlzLl9wYXJlbnQuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICBzdXBlci5fX2RldGFjaCgpO1xuICB9XG5cbiAgX190cmFuc2Zvcm1EYXRhVHlwZShyYW5nZTogQXJyYXk8YW55Pik6IEFycmF5PGFueT4ge1xuICAgIHJldHVybiByYW5nZS5tYXAoTmF0aXZlQW5pbWF0ZWRIZWxwZXIudHJhbnNmb3JtRGF0YVR5cGUpO1xuICB9XG5cbiAgX19nZXROYXRpdmVDb25maWcoKTogYW55IHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRIZWxwZXIudmFsaWRhdGVJbnRlcnBvbGF0aW9uKHRoaXMuX2NvbmZpZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlucHV0UmFuZ2U6IHRoaXMuX2NvbmZpZy5pbnB1dFJhbmdlLFxuICAgICAgLy8gT25seSB0aGUgYG91dHB1dFJhbmdlYCBjYW4gY29udGFpbiBzdHJpbmdzIHNvIHdlIGRvbid0IG5lZWQgdG8gdHJhbnNmb3JtIGBpbnB1dFJhbmdlYCBoZXJlXG4gICAgICAvKiAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXSAoPj0wLjM4LjApIC0gRmxvdyBlcnJvciBkZXRlY3RlZCBkdXJpbmdcbiAgICAgICAqIHRoZSBkZXBsb3ltZW50IG9mIHYwLjM4LjAuIFRvIHNlZSB0aGUgZXJyb3IsIHJlbW92ZSB0aGlzIGNvbW1lbnQgYW5kXG4gICAgICAgKiBydW4gZmxvdyAqL1xuICAgICAgb3V0cHV0UmFuZ2U6IHRoaXMuX190cmFuc2Zvcm1EYXRhVHlwZSh0aGlzLl9jb25maWcub3V0cHV0UmFuZ2UpLFxuICAgICAgZXh0cmFwb2xhdGVMZWZ0OlxuICAgICAgICB0aGlzLl9jb25maWcuZXh0cmFwb2xhdGVMZWZ0IHx8IHRoaXMuX2NvbmZpZy5leHRyYXBvbGF0ZSB8fCAnZXh0ZW5kJyxcbiAgICAgIGV4dHJhcG9sYXRlUmlnaHQ6XG4gICAgICAgIHRoaXMuX2NvbmZpZy5leHRyYXBvbGF0ZVJpZ2h0IHx8IHRoaXMuX2NvbmZpZy5leHRyYXBvbGF0ZSB8fCAnZXh0ZW5kJyxcbiAgICAgIHR5cGU6ICdpbnRlcnBvbGF0aW9uJyxcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQW5pbWF0ZWRJbnRlcnBvbGF0aW9uO1xuIl0sIm1hcHBpbmdzIjoiQUFZQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSxZQUFZLEdBQUdDLE9BQU8sa0JBQTVCOztBQUNBLElBQU1DLG9CQUFvQixHQUFHRCxPQUFPLDBCQUFwQzs7QUFDQSxJQUFNRSxvQkFBb0IsR0FBR0YsT0FBTywyQkFBcEM7O0FBRUEsSUFBTUcsU0FBUyxHQUFHSCxPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFDQSxJQUFNSSxjQUFjLEdBQUdKLE9BQU8sbUNBQTlCOztBQWVBLElBQU1LLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQUNDLENBQUQ7RUFBQSxPQUFlQSxDQUFmO0FBQUEsQ0FBZjs7QUFNQSxTQUFTQyxtQkFBVCxDQUNFQyxNQURGLEVBRXNDO0VBQ3BDLElBQUlBLE1BQU0sQ0FB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